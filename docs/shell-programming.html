<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Shell programming | Practical Computing and Bioinformatics for Conservation and Evolutionary Genomics</title>
  <meta name="description" content="A book example for a Chapman &amp; Hall book." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Shell programming | Practical Computing and Bioinformatics for Conservation and Evolutionary Genomics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book example for a Chapman &amp; Hall book." />
  <meta name="github-repo" content="yihui/bookdown-crc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Shell programming | Practical Computing and Bioinformatics for Conservation and Evolutionary Genomics" />
  
  <meta name="twitter:description" content="A book example for a Chapman &amp; Hall book." />
  

<meta name="author" content="Eric C. Anderson" />


<meta name="date" content="2020-03-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="essential-unixlinux-terminal-knowledge.html"/>
<link rel="next" href="sed-awk-and-regular-expressions.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ECA's Bioinformatics Handbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="erics-notes-of-what-he-might-do.html"><a href="erics-notes-of-what-he-might-do.html"><i class="fa fa-check"></i><b>2</b> Eric’s Notes of what he might do</a><ul>
<li class="chapter" data-level="2.1" data-path="erics-notes-of-what-he-might-do.html"><a href="erics-notes-of-what-he-might-do.html#table-of-topics"><i class="fa fa-check"></i><b>2.1</b> Table of topics</a></li>
</ul></li>
<li class="part"><span><b>I Part I: Essential Computing Skills</b></span></li>
<li class="chapter" data-level="3" data-path="overview-of-essential-computing-skills.html"><a href="overview-of-essential-computing-skills.html"><i class="fa fa-check"></i><b>3</b> Overview of Essential Computing Skills</a></li>
<li class="chapter" data-level="4" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html"><i class="fa fa-check"></i><b>4</b> Essential Unix/Linux Terminal Knowledge</a><ul>
<li class="chapter" data-level="4.1" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#getting-a-bash-shell-on-your-system"><i class="fa fa-check"></i><b>4.1</b> Getting a bash shell on your system</a></li>
<li class="chapter" data-level="4.2" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#navigating-the-unix-filesystem"><i class="fa fa-check"></i><b>4.2</b> Navigating the Unix filesystem</a><ul>
<li class="chapter" data-level="4.2.1" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#changing-the-working-directory-with-cd"><i class="fa fa-check"></i><b>4.2.1</b> Changing the working directory with <code>cd</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#updating-your-command-prompt"><i class="fa fa-check"></i><b>4.2.2</b> Updating your command prompt</a></li>
<li class="chapter" data-level="4.2.3" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#tab-completion-for-paths"><i class="fa fa-check"></i><b>4.2.3</b> TAB-completion for paths</a></li>
<li class="chapter" data-level="4.2.4" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#listing-the-contents-of-a-directory-with-ls"><i class="fa fa-check"></i><b>4.2.4</b> Listing the contents of a directory with <code>ls</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#globbing"><i class="fa fa-check"></i><b>4.2.5</b> Globbing</a></li>
<li class="chapter" data-level="4.2.6" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#what-makes-a-good-file-name"><i class="fa fa-check"></i><b>4.2.6</b> What makes a good file-name?</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#the-anatomy-of-a-unix-command"><i class="fa fa-check"></i><b>4.3</b> The anatomy of a Unix command</a><ul>
<li class="chapter" data-level="4.3.1" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#anatomy-command"><i class="fa fa-check"></i><b>4.3.1</b> The <code>command</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#the-options"><i class="fa fa-check"></i><b>4.3.2</b> The <em>options</em></a></li>
<li class="chapter" data-level="4.3.3" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#arguments"><i class="fa fa-check"></i><b>4.3.3</b> Arguments</a></li>
<li class="chapter" data-level="4.3.4" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#getting-information-about-unix-commands"><i class="fa fa-check"></i><b>4.3.4</b> Getting information about Unix commands</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#handling-manipulating-and-viewing-files-and-streams"><i class="fa fa-check"></i><b>4.4</b> Handling, Manipulating, and Viewing files and streams</a><ul>
<li class="chapter" data-level="4.4.1" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#creating-new-directories"><i class="fa fa-check"></i><b>4.4.1</b> Creating new directories</a></li>
<li class="chapter" data-level="4.4.2" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#fundamental-file-handling-commands"><i class="fa fa-check"></i><b>4.4.2</b> Fundamental file-handling commands</a></li>
<li class="chapter" data-level="4.4.3" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#viewing-files"><i class="fa fa-check"></i><b>4.4.3</b> “Viewing” Files</a></li>
<li class="chapter" data-level="4.4.4" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#redirecting-standard-output-and"><i class="fa fa-check"></i><b>4.4.4</b> Redirecting standard output: <code>&gt;</code> and <code>&gt;&gt;</code></a></li>
<li class="chapter" data-level="4.4.5" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#stdin-and"><i class="fa fa-check"></i><b>4.4.5</b> stdin, <code>&lt;</code> and <code>|</code></a></li>
<li class="chapter" data-level="4.4.6" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#stderr"><i class="fa fa-check"></i><b>4.4.6</b> stderr</a></li>
<li class="chapter" data-level="4.4.7" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#symbolic-links"><i class="fa fa-check"></i><b>4.4.7</b> Symbolic links</a></li>
<li class="chapter" data-level="4.4.8" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#file-permissions"><i class="fa fa-check"></i><b>4.4.8</b> File Permissions</a></li>
<li class="chapter" data-level="4.4.9" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#editing-text-files-at-the-terminal"><i class="fa fa-check"></i><b>4.4.9</b> Editing text files at the terminal</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#unix-env"><i class="fa fa-check"></i><b>4.5</b> Customizing your Environment</a><ul>
<li class="chapter" data-level="4.5.1" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#appearances-matter"><i class="fa fa-check"></i><b>4.5.1</b> Appearances matter</a></li>
<li class="chapter" data-level="4.5.2" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#where-are-my-programscommands-at"><i class="fa fa-check"></i><b>4.5.2</b> Where are my programs/commands at?!</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#a-few-more-important-keystrokes"><i class="fa fa-check"></i><b>4.6</b> A Few More Important Keystrokes</a></li>
<li class="chapter" data-level="4.7" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#a-short-list-of-additional-useful-commands."><i class="fa fa-check"></i><b>4.7</b> A short list of additional useful commands.</a></li>
<li class="chapter" data-level="4.8" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#two-important-computing-concepts"><i class="fa fa-check"></i><b>4.8</b> Two important computing concepts</a><ul>
<li class="chapter" data-level="4.8.1" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#compression"><i class="fa fa-check"></i><b>4.8.1</b> Compression</a></li>
<li class="chapter" data-level="4.8.2" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#hashing"><i class="fa fa-check"></i><b>4.8.2</b> Hashing</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="essential-unixlinux-terminal-knowledge.html"><a href="essential-unixlinux-terminal-knowledge.html#unix-quick-study-guide"><i class="fa fa-check"></i><b>4.9</b> Unix: Quick Study Guide</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="shell-programming.html"><a href="shell-programming.html"><i class="fa fa-check"></i><b>5</b> Shell programming</a><ul>
<li class="chapter" data-level="5.1" data-path="shell-programming.html"><a href="shell-programming.html#an-example-script"><i class="fa fa-check"></i><b>5.1</b> An example script</a></li>
<li class="chapter" data-level="5.2" data-path="shell-programming.html"><a href="shell-programming.html#the-structure-of-a-bash-script"><i class="fa fa-check"></i><b>5.2</b> The Structure of a Bash Script</a><ul>
<li class="chapter" data-level="5.2.1" data-path="shell-programming.html"><a href="shell-programming.html#a-bit-more-on-and"><i class="fa fa-check"></i><b>5.2.1</b> A bit more on <code>;</code> and <code>&amp;</code></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="shell-programming.html"><a href="shell-programming.html#variables"><i class="fa fa-check"></i><b>5.3</b> Variables</a><ul>
<li class="chapter" data-level="5.3.1" data-path="shell-programming.html"><a href="shell-programming.html#assigning-values-to-variables"><i class="fa fa-check"></i><b>5.3.1</b> Assigning values to variables</a></li>
<li class="chapter" data-level="5.3.2" data-path="shell-programming.html"><a href="shell-programming.html#accessing-values-from-variables"><i class="fa fa-check"></i><b>5.3.2</b> Accessing values from variables</a></li>
<li class="chapter" data-level="5.3.3" data-path="shell-programming.html"><a href="shell-programming.html#what-does-the-shell-do-with-the-value-substituted-for-a-variable"><i class="fa fa-check"></i><b>5.3.3</b> What does the shell do with the value substituted for a variable?</a></li>
<li class="chapter" data-level="5.3.4" data-path="shell-programming.html"><a href="shell-programming.html#double-and-single-quotation-marks-and-variable-substitution"><i class="fa fa-check"></i><b>5.3.4</b> Double and Single Quotation Marks and Variable Substitution</a></li>
<li class="chapter" data-level="5.3.5" data-path="shell-programming.html"><a href="shell-programming.html#one-useful-fancy-variable-substitution-method"><i class="fa fa-check"></i><b>5.3.5</b> One useful, fancy, variable-substitution method</a></li>
<li class="chapter" data-level="5.3.6" data-path="shell-programming.html"><a href="shell-programming.html#variable-arrays"><i class="fa fa-check"></i><b>5.3.6</b> Variable arrays</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="shell-programming.html"><a href="shell-programming.html#evaluate-a-command-and-substitute-the-result-on-the-command-line"><i class="fa fa-check"></i><b>5.4</b> Evaluate a command and substitute the result on the command line</a></li>
<li class="chapter" data-level="5.5" data-path="shell-programming.html"><a href="shell-programming.html#groupingcollecting-output-from-multiple-commands-commands-and-commands"><i class="fa fa-check"></i><b>5.5</b> Grouping/Collecting output from multiple commands: <code>(commands)</code> and <code>{ commands; }</code></a></li>
<li class="chapter" data-level="5.6" data-path="shell-programming.html"><a href="shell-programming.html#exit-status"><i class="fa fa-check"></i><b>5.6</b> Exit Status</a><ul>
<li class="chapter" data-level="5.6.1" data-path="shell-programming.html"><a href="shell-programming.html#combinations-of-exit-statuses"><i class="fa fa-check"></i><b>5.6.1</b> Combinations of exit statuses</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="shell-programming.html"><a href="shell-programming.html#loops-and-repetition"><i class="fa fa-check"></i><b>5.7</b> Loops and repetition</a></li>
<li class="chapter" data-level="5.8" data-path="shell-programming.html"><a href="shell-programming.html#more-conditional-evaluation-if-then-else-and-friends"><i class="fa fa-check"></i><b>5.8</b> More Conditional Evaluation: <code>if</code>, <code>then</code>, <code>else</code>, and friends</a></li>
<li class="chapter" data-level="5.9" data-path="shell-programming.html"><a href="shell-programming.html#finallypositional-parameters"><i class="fa fa-check"></i><b>5.9</b> Finally…positional parameters</a></li>
<li class="chapter" data-level="5.10" data-path="shell-programming.html"><a href="shell-programming.html#basename-and-dirname-two-useful-little-utilities"><i class="fa fa-check"></i><b>5.10</b> <code>basename</code> and <code>dirname</code> two useful little utilities</a></li>
<li class="chapter" data-level="5.11" data-path="shell-programming.html"><a href="shell-programming.html#bash-functions"><i class="fa fa-check"></i><b>5.11</b> <code>bash</code> functions</a></li>
<li class="chapter" data-level="5.12" data-path="shell-programming.html"><a href="shell-programming.html#reading-files-line-by-line"><i class="fa fa-check"></i><b>5.12</b> reading files line by line</a></li>
<li class="chapter" data-level="5.13" data-path="shell-programming.html"><a href="shell-programming.html#further-reading"><i class="fa fa-check"></i><b>5.13</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html"><i class="fa fa-check"></i><b>6</b> Sed, awk, and regular expressions</a><ul>
<li class="chapter" data-level="6.1" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#awk"><i class="fa fa-check"></i><b>6.1</b> awk</a><ul>
<li class="chapter" data-level="6.1.1" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#line-cycling-tests-and-actions"><i class="fa fa-check"></i><b>6.1.1</b> Line-cycling, tests and actions</a></li>
<li class="chapter" data-level="6.1.2" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#column-splitting-fields--f-nf-print-ofs-and-begin"><i class="fa fa-check"></i><b>6.1.2</b> Column splitting, fields, <code>-F</code>, <code>$</code>, <code>NF</code>, <code>print</code>, <code>OFS</code> and <code>BEGIN</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#a-brief-introduction-to-regular-expressions"><i class="fa fa-check"></i><b>6.1.3</b> A brief introduction to regular expressions</a></li>
<li class="chapter" data-level="6.1.4" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#a-variety-of-tests"><i class="fa fa-check"></i><b>6.1.4</b> A variety of tests</a></li>
<li class="chapter" data-level="6.1.5" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#code-in-the-action-blocks"><i class="fa fa-check"></i><b>6.1.5</b> Code in the action blocks</a></li>
<li class="chapter" data-level="6.1.6" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#using-awk-to-assign-to-shell-variables"><i class="fa fa-check"></i><b>6.1.6</b> Using <code>awk</code> to assign to shell variables</a></li>
<li class="chapter" data-level="6.1.7" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#passing-variables-into-awk-with--v"><i class="fa fa-check"></i><b>6.1.7</b> Passing Variables into <code>awk</code> with <code>-v</code></a></li>
<li class="chapter" data-level="6.1.8" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#writing-awk-scripts-in-files"><i class="fa fa-check"></i><b>6.1.8</b> Writing awk scripts in files</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="sed-awk-and-regular-expressions.html"><a href="sed-awk-and-regular-expressions.html#sed"><i class="fa fa-check"></i><b>6.2</b> sed</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html"><i class="fa fa-check"></i><b>7</b> Working on remote servers</a><ul>
<li class="chapter" data-level="7.1" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#accessing-remote-computers"><i class="fa fa-check"></i><b>7.1</b> Accessing remote computers</a><ul>
<li class="chapter" data-level="7.1.1" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#windows"><i class="fa fa-check"></i><b>7.1.1</b> Windows</a></li>
<li class="chapter" data-level="7.1.2" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#hummingbird"><i class="fa fa-check"></i><b>7.1.2</b> Hummingbird</a></li>
<li class="chapter" data-level="7.1.3" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#summit"><i class="fa fa-check"></i><b>7.1.3</b> Summit</a></li>
<li class="chapter" data-level="7.1.4" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#sedna"><i class="fa fa-check"></i><b>7.1.4</b> Sedna</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#transferring-files-to-remote-computers"><i class="fa fa-check"></i><b>7.2</b> Transferring files to remote computers</a><ul>
<li class="chapter" data-level="7.2.1" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#sftp-via-lftp"><i class="fa fa-check"></i><b>7.2.1</b> <code>sftp</code> (via <code>lftp</code>)</a></li>
<li class="chapter" data-level="7.2.2" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#git"><i class="fa fa-check"></i><b>7.2.2</b> git</a></li>
<li class="chapter" data-level="7.2.3" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#globus"><i class="fa fa-check"></i><b>7.2.3</b> Globus</a></li>
<li class="chapter" data-level="7.2.4" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#interfacing-with-the-cloud"><i class="fa fa-check"></i><b>7.2.4</b> Interfacing with “The Cloud”</a></li>
<li class="chapter" data-level="7.2.5" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#getting-files-from-a-sequencing-center"><i class="fa fa-check"></i><b>7.2.5</b> Getting files from a sequencing center</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#tmux"><i class="fa fa-check"></i><b>7.3</b> <code>tmux</code>: the terminal multiplexer</a><ul>
<li class="chapter" data-level="7.3.1" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#an-analogy-for-how-tmux-works"><i class="fa fa-check"></i><b>7.3.1</b> An analogy for how <code>tmux</code> works</a></li>
<li class="chapter" data-level="7.3.2" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#first-steps-with-tmux"><i class="fa fa-check"></i><b>7.3.2</b> First steps with <code>tmux</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#further-steps-with-tmux"><i class="fa fa-check"></i><b>7.3.3</b> Further steps with <code>tmux</code></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#vim-its-time-to-get-serious-with-text-editing"><i class="fa fa-check"></i><b>7.4</b> <code>vim</code>: it’s time to get serious with text editing</a><ul>
<li class="chapter" data-level="7.4.1" data-path="working-on-remote-servers.html"><a href="working-on-remote-servers.html#using-neovim-and-nvim-r-and-tmux-to-use-r-well-on-the-cluster"><i class="fa fa-check"></i><b>7.4.1</b> Using neovim and Nvim-R and tmux to use R well on the cluster</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html"><i class="fa fa-check"></i><b>8</b> High Performance Computing Clusters (HPCC’s)</a><ul>
<li class="chapter" data-level="8.1" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#an-oversimplified-but-useful-view-of-a-computing-cluster"><i class="fa fa-check"></i><b>8.1</b> An oversimplified, but useful, view of a computing cluster</a></li>
<li class="chapter" data-level="8.2" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#cluster-computing-and-the-job-scheduler"><i class="fa fa-check"></i><b>8.2</b> Cluster computing and the job scheduler</a></li>
<li class="chapter" data-level="8.3" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#learning-about-the-resources-on-your-hpcc"><i class="fa fa-check"></i><b>8.3</b> Learning about the resources on your HPCC</a></li>
<li class="chapter" data-level="8.4" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#installing-software-on-an-hpcc"><i class="fa fa-check"></i><b>8.4</b> Installing Software on an HPCC</a><ul>
<li class="chapter" data-level="8.4.1" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#miniconda"><i class="fa fa-check"></i><b>8.4.1</b> Miniconda</a></li>
<li class="chapter" data-level="8.4.2" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#modules"><i class="fa fa-check"></i><b>8.4.2</b> Modules</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#getting-compute-resources-allocated-to-your-jobs-on-an-hpcc"><i class="fa fa-check"></i><b>8.5</b> Getting compute resources allocated to your jobs on an HPCC</a><ul>
<li class="chapter" data-level="8.5.1" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#interactive-sessions"><i class="fa fa-check"></i><b>8.5.1</b> Interactive sessions</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#more-boneyard"><i class="fa fa-check"></i><b>8.6</b> More Boneyard…</a></li>
<li class="chapter" data-level="8.7" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#the-queue-slurmsgeuge"><i class="fa fa-check"></i><b>8.7</b> The Queue (SLURM/SGE/UGE)</a></li>
<li class="chapter" data-level="8.8" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#modules-package"><i class="fa fa-check"></i><b>8.8</b> Modules package</a></li>
<li class="chapter" data-level="8.9" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#compiling-programs-without-admin-privileges"><i class="fa fa-check"></i><b>8.9</b> Compiling programs without admin privileges</a></li>
<li class="chapter" data-level="8.10" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#job-arrays"><i class="fa fa-check"></i><b>8.10</b> Job arrays</a></li>
<li class="chapter" data-level="8.11" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#writing-stdout-and-stderr-to-files"><i class="fa fa-check"></i><b>8.11</b> Writing stdout and stderr to files</a></li>
<li class="chapter" data-level="8.12" data-path="high-performance-computing-clusters-hpccs.html"><a href="high-performance-computing-clusters-hpccs.html#breaking-stuff-down"><i class="fa fa-check"></i><b>8.12</b> Breaking stuff down</a></li>
</ul></li>
<li class="part"><span><b>II Part II: Reproducible Research Strategies</b></span></li>
<li class="chapter" data-level="9" data-path="introduction-to-reproducible-research.html"><a href="introduction-to-reproducible-research.html"><i class="fa fa-check"></i><b>9</b> Introduction to Reproducible Research</a></li>
<li class="chapter" data-level="10" data-path="rstudio-and-project-centered-organization.html"><a href="rstudio-and-project-centered-organization.html"><i class="fa fa-check"></i><b>10</b> Rstudio and Project-centered Organization</a><ul>
<li class="chapter" data-level="10.1" data-path="rstudio-and-project-centered-organization.html"><a href="rstudio-and-project-centered-organization.html#organizing-big-projects"><i class="fa fa-check"></i><b>10.1</b> Organizing big projects</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>11</b> Version control</a><ul>
<li class="chapter" data-level="11.1" data-path="version-control.html"><a href="version-control.html#why-use-version-control"><i class="fa fa-check"></i><b>11.1</b> Why use version control?</a></li>
<li class="chapter" data-level="11.2" data-path="version-control.html"><a href="version-control.html#git-workings"><i class="fa fa-check"></i><b>11.2</b> How git works</a></li>
<li class="chapter" data-level="11.3" data-path="version-control.html"><a href="version-control.html#git-workflow-patterns"><i class="fa fa-check"></i><b>11.3</b> git workflow patterns</a></li>
<li class="chapter" data-level="11.4" data-path="version-control.html"><a href="version-control.html#using-git-with-rstudio"><i class="fa fa-check"></i><b>11.4</b> using git with Rstudio</a></li>
<li class="chapter" data-level="11.5" data-path="version-control.html"><a href="version-control.html#git-on-the-command-line"><i class="fa fa-check"></i><b>11.5</b> git on the command line</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="a-fast-furious-overview-of-the-tidyverse.html"><a href="a-fast-furious-overview-of-the-tidyverse.html"><i class="fa fa-check"></i><b>12</b> A fast, furious overview of the tidyverse</a></li>
<li class="chapter" data-level="13" data-path="authoring-reproducibly-with-rmarkdown.html"><a href="authoring-reproducibly-with-rmarkdown.html"><i class="fa fa-check"></i><b>13</b> Authoring reproducibly with Rmarkdown</a><ul>
<li class="chapter" data-level="13.1" data-path="authoring-reproducibly-with-rmarkdown.html"><a href="authoring-reproducibly-with-rmarkdown.html#notebooks"><i class="fa fa-check"></i><b>13.1</b> Notebooks</a></li>
<li class="chapter" data-level="13.2" data-path="authoring-reproducibly-with-rmarkdown.html"><a href="authoring-reproducibly-with-rmarkdown.html#references"><i class="fa fa-check"></i><b>13.2</b> References</a><ul>
<li class="chapter" data-level="13.2.1" data-path="authoring-reproducibly-with-rmarkdown.html"><a href="authoring-reproducibly-with-rmarkdown.html#zotero-and-rmarkdown"><i class="fa fa-check"></i><b>13.2.1</b> Zotero and Rmarkdown</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="authoring-reproducibly-with-rmarkdown.html"><a href="authoring-reproducibly-with-rmarkdown.html#bookdown"><i class="fa fa-check"></i><b>13.3</b> Bookdown</a></li>
<li class="chapter" data-level="13.4" data-path="authoring-reproducibly-with-rmarkdown.html"><a href="authoring-reproducibly-with-rmarkdown.html#google-docs"><i class="fa fa-check"></i><b>13.4</b> Google Docs</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="using-python.html"><a href="using-python.html"><i class="fa fa-check"></i><b>14</b> Using python</a></li>
<li class="part"><span><b>III Part III: Bioinformatic Analyses</b></span></li>
<li class="chapter" data-level="15" data-path="overview-of-bioinformatic-analyses.html"><a href="overview-of-bioinformatic-analyses.html"><i class="fa fa-check"></i><b>15</b> Overview of Bioinformatic Analyses</a></li>
<li class="chapter" data-level="16" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html"><i class="fa fa-check"></i><b>16</b> DNA Sequences and Sequencing</a><ul>
<li class="chapter" data-level="16.1" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#dna-stuff"><i class="fa fa-check"></i><b>16.1</b> DNA Stuff</a><ul>
<li class="chapter" data-level="16.1.1" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#dna-replication-with-dna-polymerase"><i class="fa fa-check"></i><b>16.1.1</b> DNA Replication with DNA Polymerase</a></li>
<li class="chapter" data-level="16.1.2" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#the-importance-of-the-3-hydroxyl"><i class="fa fa-check"></i><b>16.1.2</b> The importance of the 3’ hydroxyl…</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#sanger-sequencing"><i class="fa fa-check"></i><b>16.2</b> Sanger sequencing</a></li>
<li class="chapter" data-level="16.3" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#illumina-sequencing-by-synthesis"><i class="fa fa-check"></i><b>16.3</b> Illumina Sequencing by Synthesis</a></li>
<li class="chapter" data-level="16.4" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#library-prep-protocols"><i class="fa fa-check"></i><b>16.4</b> Library Prep Protocols</a><ul>
<li class="chapter" data-level="16.4.1" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#wgs"><i class="fa fa-check"></i><b>16.4.1</b> WGS</a></li>
<li class="chapter" data-level="16.4.2" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#rad-seq-methods"><i class="fa fa-check"></i><b>16.4.2</b> RAD-Seq methods</a></li>
<li class="chapter" data-level="16.4.3" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#amplicon-sequencing"><i class="fa fa-check"></i><b>16.4.3</b> Amplicon Sequencing</a></li>
<li class="chapter" data-level="16.4.4" data-path="dna-sequences-and-sequencing.html"><a href="dna-sequences-and-sequencing.html#capture-arrays-rapture-etc."><i class="fa fa-check"></i><b>16.4.4</b> Capture arrays, RAPTURE, etc.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html"><i class="fa fa-check"></i><b>17</b> Bioinformatic file formats</a><ul>
<li class="chapter" data-level="17.1" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#sequences"><i class="fa fa-check"></i><b>17.1</b> Sequences</a></li>
<li class="chapter" data-level="17.2" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#fastq"><i class="fa fa-check"></i><b>17.2</b> FASTQ</a><ul>
<li class="chapter" data-level="17.2.1" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#line-1-illumina-identifier-lines"><i class="fa fa-check"></i><b>17.2.1</b> Line 1: Illumina identifier lines</a></li>
<li class="chapter" data-level="17.2.2" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#line-4-base-quality-scores"><i class="fa fa-check"></i><b>17.2.2</b> Line 4: Base quality scores</a></li>
<li class="chapter" data-level="17.2.3" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#a-fastq-tidyverse-interlude"><i class="fa fa-check"></i><b>17.2.3</b> A FASTQ ‘tidyverse’ Interlude</a></li>
<li class="chapter" data-level="17.2.4" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#comparing-read-1-to-read-2"><i class="fa fa-check"></i><b>17.2.4</b> Comparing read 1 to read 2</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#fasta"><i class="fa fa-check"></i><b>17.3</b> FASTA</a><ul>
<li class="chapter" data-level="17.3.1" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#genomic-ranges"><i class="fa fa-check"></i><b>17.3.1</b> Genomic ranges</a></li>
<li class="chapter" data-level="17.3.2" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#extracting-genomic-ranges-from-a-fasta-file"><i class="fa fa-check"></i><b>17.3.2</b> Extracting genomic ranges from a FASTA file</a></li>
<li class="chapter" data-level="17.3.3" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#downloading-reference-genomes-from-ncbi"><i class="fa fa-check"></i><b>17.3.3</b> Downloading reference genomes from NCBI</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#alignments"><i class="fa fa-check"></i><b>17.4</b> Alignments</a><ul>
<li class="chapter" data-level="17.4.1" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#how-might-i-align-to-thee-let-me-count-the-ways"><i class="fa fa-check"></i><b>17.4.1</b> How might I align to thee? Let me count the ways…</a></li>
<li class="chapter" data-level="17.4.2" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#play-with-simple-alignments"><i class="fa fa-check"></i><b>17.4.2</b> Play with simple alignments</a></li>
<li class="chapter" data-level="17.4.3" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#sam-flags"><i class="fa fa-check"></i><b>17.4.3</b> SAM Flags</a></li>
<li class="chapter" data-level="17.4.4" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#the-cigar-string"><i class="fa fa-check"></i><b>17.4.4</b> The CIGAR string</a></li>
<li class="chapter" data-level="17.4.5" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#the-seq-and-qual-columns"><i class="fa fa-check"></i><b>17.4.5</b> The SEQ and QUAL columns</a></li>
<li class="chapter" data-level="17.4.6" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#sam-file-headers"><i class="fa fa-check"></i><b>17.4.6</b> SAM File Headers</a></li>
<li class="chapter" data-level="17.4.7" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#the-bam-format"><i class="fa fa-check"></i><b>17.4.7</b> The BAM format</a></li>
<li class="chapter" data-level="17.4.8" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#quick-self-study"><i class="fa fa-check"></i><b>17.4.8</b> Quick self study</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#variants"><i class="fa fa-check"></i><b>17.5</b> Variants</a></li>
<li class="chapter" data-level="17.6" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#segments"><i class="fa fa-check"></i><b>17.6</b> Segments</a></li>
<li class="chapter" data-level="17.7" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#conversionextractions-between-different-formats"><i class="fa fa-check"></i><b>17.7</b> Conversion/Extractions between different formats</a></li>
<li class="chapter" data-level="17.8" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#visualization-of-genomic-data"><i class="fa fa-check"></i><b>17.8</b> Visualization of Genomic Data</a><ul>
<li class="chapter" data-level="17.8.1" data-path="bioinformatic-file-formats.html"><a href="bioinformatic-file-formats.html#sample-data"><i class="fa fa-check"></i><b>17.8.1</b> Sample Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="genome-assembly.html"><a href="genome-assembly.html"><i class="fa fa-check"></i><b>18</b> Genome Assembly</a></li>
<li class="chapter" data-level="19" data-path="alignment-of-sequence-data-to-a-reference-genome.html"><a href="alignment-of-sequence-data-to-a-reference-genome.html"><i class="fa fa-check"></i><b>19</b> Alignment of sequence data to a reference genome</a><ul>
<li class="chapter" data-level="19.1" data-path="alignment-of-sequence-data-to-a-reference-genome.html"><a href="alignment-of-sequence-data-to-a-reference-genome.html#preprocess"><i class="fa fa-check"></i><b>19.1</b> Preprocess ?</a></li>
<li class="chapter" data-level="19.2" data-path="alignment-of-sequence-data-to-a-reference-genome.html"><a href="alignment-of-sequence-data-to-a-reference-genome.html#read-groups"><i class="fa fa-check"></i><b>19.2</b> Read Groups</a></li>
<li class="chapter" data-level="19.3" data-path="alignment-of-sequence-data-to-a-reference-genome.html"><a href="alignment-of-sequence-data-to-a-reference-genome.html#merging-bam-files"><i class="fa fa-check"></i><b>19.3</b> Merging BAM files</a></li>
<li class="chapter" data-level="19.4" data-path="alignment-of-sequence-data-to-a-reference-genome.html"><a href="alignment-of-sequence-data-to-a-reference-genome.html#divide-and-conquer-strategies"><i class="fa fa-check"></i><b>19.4</b> Divide and Conquer Strategies</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="variant-calling-with-gatk.html"><a href="variant-calling-with-gatk.html"><i class="fa fa-check"></i><b>20</b> Variant calling with GATK</a></li>
<li class="chapter" data-level="21" data-path="bioinformatics-for-rad-seq-data-with-and-without-a-reference-genome.html"><a href="bioinformatics-for-rad-seq-data-with-and-without-a-reference-genome.html"><i class="fa fa-check"></i><b>21</b> Bioinformatics for RAD seq data with and without a reference genome</a></li>
<li class="chapter" data-level="22" data-path="processing-amplicon-sequencing-data.html"><a href="processing-amplicon-sequencing-data.html"><i class="fa fa-check"></i><b>22</b> Processing amplicon sequencing data</a></li>
<li class="chapter" data-level="23" data-path="genome-annotation.html"><a href="genome-annotation.html"><i class="fa fa-check"></i><b>23</b> Genome Annotation</a></li>
<li class="chapter" data-level="24" data-path="whole-genome-alignment-strategies.html"><a href="whole-genome-alignment-strategies.html"><i class="fa fa-check"></i><b>24</b> Whole genome alignment strategies</a><ul>
<li class="chapter" data-level="24.1" data-path="whole-genome-alignment-strategies.html"><a href="whole-genome-alignment-strategies.html#mapping-of-scaffolds-to-a-closely-related-genome"><i class="fa fa-check"></i><b>24.1</b> Mapping of scaffolds to a closely related genome</a></li>
<li class="chapter" data-level="24.2" data-path="whole-genome-alignment-strategies.html"><a href="whole-genome-alignment-strategies.html#obtaining-ancestral-states-from-an-outgroup-genome"><i class="fa fa-check"></i><b>24.2</b> Obtaining Ancestral States from an Outgroup Genome</a><ul>
<li class="chapter" data-level="24.2.1" data-path="whole-genome-alignment-strategies.html"><a href="whole-genome-alignment-strategies.html#using-lastz-to-align-coho-to-the-chinook-genome"><i class="fa fa-check"></i><b>24.2.1</b> Using LASTZ to align coho to the chinook genome</a></li>
<li class="chapter" data-level="24.2.2" data-path="whole-genome-alignment-strategies.html"><a href="whole-genome-alignment-strategies.html#try-on-the-chinook-chromosomes"><i class="fa fa-check"></i><b>24.2.2</b> Try on the chinook chromosomes</a></li>
<li class="chapter" data-level="24.2.3" data-path="whole-genome-alignment-strategies.html"><a href="whole-genome-alignment-strategies.html#explore-the-other-parameters-more"><i class="fa fa-check"></i><b>24.2.3</b> Explore the other parameters more</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Part IV: Analysis of Big Variant Data</b></span></li>
<li class="chapter" data-level="25" data-path="bioinformatic-analysis-on-variant-data.html"><a href="bioinformatic-analysis-on-variant-data.html"><i class="fa fa-check"></i><b>25</b> Bioinformatic analysis on variant data</a></li>
<li class="part"><span><b>V Part V: Population Genomics</b></span></li>
<li class="chapter" data-level="26" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html"><i class="fa fa-check"></i><b>26</b> Topics in pop gen</a><ul>
<li class="chapter" data-level="26.1" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#coalescent"><i class="fa fa-check"></i><b>26.1</b> Coalescent</a></li>
<li class="chapter" data-level="26.2" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#measures-of-genetic-diversity-and-such"><i class="fa fa-check"></i><b>26.2</b> Measures of genetic diversity and such</a></li>
<li class="chapter" data-level="26.3" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#demographic-inference-with-partial-a-partial-i-and-moments"><i class="fa fa-check"></i><b>26.3</b> Demographic inference with <span class="math inline">\(\partial a \partial i\)</span> and <em>moments</em></a></li>
<li class="chapter" data-level="26.4" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#balls-in-boxes"><i class="fa fa-check"></i><b>26.4</b> Balls in Boxes</a></li>
<li class="chapter" data-level="26.5" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#some-landscape-genetics"><i class="fa fa-check"></i><b>26.5</b> Some landscape genetics</a></li>
<li class="chapter" data-level="26.6" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#relationship-inference"><i class="fa fa-check"></i><b>26.6</b> Relationship Inference</a></li>
<li class="chapter" data-level="26.7" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#tests-for-selection"><i class="fa fa-check"></i><b>26.7</b> Tests for Selection</a></li>
<li class="chapter" data-level="26.8" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#multivariate-associations-gea-etc."><i class="fa fa-check"></i><b>26.8</b> Multivariate Associations, GEA, etc.</a></li>
<li class="chapter" data-level="26.9" data-path="topics-in-pop-gen.html"><a href="topics-in-pop-gen.html#estimating-heritability-in-the-wild"><i class="fa fa-check"></i><b>26.9</b> Estimating heritability in the wild</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Practical Computing and Bioinformatics for Conservation and Evolutionary Genomics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shell-programming" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Shell programming</h1>
<p>In our first foray into Unix and the shell, we restricted ourselves mostly
to navigating the file system, handling files, and working with streams of data
(via redirection and pipes). These are all crucial skills, but the bash shell
becomes truly powerful when we start to adopt it as a sort of programming language.
That’s right, even though the functionality of bash is geared toward running jobs
and calling commands, it still exhibits most of the features expected in a programming
language, like variables, iteration and flow control.</p>
<div id="an-example-script" class="section level2">
<h2><span class="header-section-number">5.1</span> An example script</h2>
<p>We start this chapter by taking a look at a short bash program (typically
called a <em>script</em>) that the author wrote in order to efficiently download
(clone, really) repositories from GitHub that have been submitted by
students to GitHub Classroom. The program is not long, but exhibits
many useful features of bash as a programming language. If you are reading
this, not in the context of a class with lectures, just go ahead and read
through it and see if you can figure out what is going on in each line
of the script. Afterward, we will address many features of bash by
referencing different parts of the script.</p>
<p>The script, which happens to be stored in a file called <code>clone-classroom-repos.sh</code>
is printed below, with linenumbers, since we will
be referring back to specific sections of the script later.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode numberSource sh numberLines"><code class="sourceCode bash"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2"></a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="co"># define a function to print the usage or &quot;help&quot; for the script</span></a>
<a class="sourceLine" id="cb52-4" data-line-number="4"><span class="kw">function</span><span class="fu"> usage</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb52-5" data-line-number="5">      <span class="bu">echo</span> Syntax:</a>
<a class="sourceLine" id="cb52-6" data-line-number="6">      <span class="bu">echo</span> <span class="st">&quot;  </span><span class="va">$(</span><span class="fu">basename</span> <span class="va">$0)</span><span class="st">  GH_Prefix  Repo_Prefix  Branch  Dir</span></a>
<a class="sourceLine" id="cb52-7" data-line-number="7"><span class="st">      </span></a>
<a class="sourceLine" id="cb52-8" data-line-number="8"><span class="st">      GH_Prefix: the URL of the GitHub site where the repository exists.</span></a>
<a class="sourceLine" id="cb52-9" data-line-number="9"><span class="st">      Repo_Prefix: the prefix of the name of each repository to be cloned.</span></a>
<a class="sourceLine" id="cb52-10" data-line-number="10"><span class="st">      Branch: the name of the branch to create and switch to in the repository,</span></a>
<a class="sourceLine" id="cb52-11" data-line-number="11"><span class="st">         once the repo has been cloned.</span></a>
<a class="sourceLine" id="cb52-12" data-line-number="12"><span class="st">      Dir: path to the directory (will be created if necessary) to clone all</span></a>
<a class="sourceLine" id="cb52-13" data-line-number="13"><span class="st">         the repositories to.</span></a>
<a class="sourceLine" id="cb52-14" data-line-number="14"><span class="st">         </span></a>
<a class="sourceLine" id="cb52-15" data-line-number="15"><span class="st">   Example:</span></a>
<a class="sourceLine" id="cb52-16" data-line-number="16"><span class="st">   </span></a>
<a class="sourceLine" id="cb52-17" data-line-number="17"><span class="st">      </span><span class="va">$(</span><span class="fu">basename</span> <span class="va">$0)</span><span class="st">  https://github.com/CSU-con-gen-bioinformatics-2020  illumina-video-questions- erics-edits  /tmp/illumina-questions</span></a>
<a class="sourceLine" id="cb52-18" data-line-number="18"><span class="st">      &quot;</span></a>
<a class="sourceLine" id="cb52-19" data-line-number="19">      <span class="bu">echo</span></a>
<a class="sourceLine" id="cb52-20" data-line-number="20"><span class="kw">}</span></a>
<a class="sourceLine" id="cb52-21" data-line-number="21"></a>
<a class="sourceLine" id="cb52-22" data-line-number="22"><span class="co">#  test for right number of required args.  If not, print usage message</span></a>
<a class="sourceLine" id="cb52-23" data-line-number="23"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$#</span> <span class="ot">-ne</span> 4<span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb52-24" data-line-number="24">    <span class="ex">usage</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb52-25" data-line-number="25">    <span class="bu">exit</span> 1<span class="kw">;</span></a>
<a class="sourceLine" id="cb52-26" data-line-number="26"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb52-27" data-line-number="27"></a>
<a class="sourceLine" id="cb52-28" data-line-number="28"><span class="co"># copy positional parameters into other variables</span></a>
<a class="sourceLine" id="cb52-29" data-line-number="29"><span class="va">GHP=$1</span></a>
<a class="sourceLine" id="cb52-30" data-line-number="30"><span class="va">RP=$2</span></a>
<a class="sourceLine" id="cb52-31" data-line-number="31"><span class="va">BRANCH=$3</span></a>
<a class="sourceLine" id="cb52-32" data-line-number="32"><span class="va">DD=$4</span></a>
<a class="sourceLine" id="cb52-33" data-line-number="33"></a>
<a class="sourceLine" id="cb52-34" data-line-number="34"><span class="co"># assign string with student GitHub handles into a variable</span></a>
<a class="sourceLine" id="cb52-35" data-line-number="35"><span class="va">GHNAMES=</span><span class="st">&quot;AmandaCicchino</span></a>
<a class="sourceLine" id="cb52-36" data-line-number="36"><span class="st">BrennaF</span></a>
<a class="sourceLine" id="cb52-37" data-line-number="37"><span class="st">CaitlinWells</span></a>
<a class="sourceLine" id="cb52-38" data-line-number="38"><span class="st">EllenMCampbell</span></a>
<a class="sourceLine" id="cb52-39" data-line-number="39"><span class="st">FayDong</span></a>
<a class="sourceLine" id="cb52-40" data-line-number="40"><span class="st">LibbyGH</span></a>
<a class="sourceLine" id="cb52-41" data-line-number="41"><span class="st">NathanPhipps</span></a>
<a class="sourceLine" id="cb52-42" data-line-number="42"><span class="st">RGCheek</span></a>
<a class="sourceLine" id="cb52-43" data-line-number="43"><span class="st">Ronan17</span></a>
<a class="sourceLine" id="cb52-44" data-line-number="44"><span class="st">abeulke</span></a>
<a class="sourceLine" id="cb52-45" data-line-number="45"><span class="st">carolazari</span></a>
<a class="sourceLine" id="cb52-46" data-line-number="46"><span class="st">cbossu</span></a>
<a class="sourceLine" id="cb52-47" data-line-number="47"><span class="st">ccolumbu</span></a>
<a class="sourceLine" id="cb52-48" data-line-number="48"><span class="st">elenacorrea</span></a>
<a class="sourceLine" id="cb52-49" data-line-number="49"><span class="st">eriqande</span></a>
<a class="sourceLine" id="cb52-50" data-line-number="50"><span class="st">jenleon07</span></a>
<a class="sourceLine" id="cb52-51" data-line-number="51"><span class="st">kimhoke</span></a>
<a class="sourceLine" id="cb52-52" data-line-number="52"><span class="st">kruegg</span></a>
<a class="sourceLine" id="cb52-53" data-line-number="53"><span class="st">lauracgoetz</span></a>
<a class="sourceLine" id="cb52-54" data-line-number="54"><span class="st">mdrod110</span></a>
<a class="sourceLine" id="cb52-55" data-line-number="55"><span class="st">mgdesaix</span></a>
<a class="sourceLine" id="cb52-56" data-line-number="56"><span class="st">raven-wings</span></a>
<a class="sourceLine" id="cb52-57" data-line-number="57"><span class="st">seamus100</span></a>
<a class="sourceLine" id="cb52-58" data-line-number="58"><span class="st">taylorbobowski</span></a>
<a class="sourceLine" id="cb52-59" data-line-number="59"><span class="st">wcfunk&quot;</span></a>
<a class="sourceLine" id="cb52-60" data-line-number="60"></a>
<a class="sourceLine" id="cb52-61" data-line-number="61"><span class="co"># assign my GitHub username to the variable USER</span></a>
<a class="sourceLine" id="cb52-62" data-line-number="62"><span class="va">USER=</span>eriqande</a>
<a class="sourceLine" id="cb52-63" data-line-number="63"></a>
<a class="sourceLine" id="cb52-64" data-line-number="64"><span class="co"># assign the current working directory to the variable RUNDIR</span></a>
<a class="sourceLine" id="cb52-65" data-line-number="65"><span class="va">RUNDIR=$PWD</span></a>
<a class="sourceLine" id="cb52-66" data-line-number="66"></a>
<a class="sourceLine" id="cb52-67" data-line-number="67"><span class="co"># make a new directory named whatever the user wanted for the output directory</span></a>
<a class="sourceLine" id="cb52-68" data-line-number="68"><span class="fu">mkdir</span> -p <span class="va">$DD</span></a>
<a class="sourceLine" id="cb52-69" data-line-number="69"></a>
<a class="sourceLine" id="cb52-70" data-line-number="70"><span class="co"># make variables to hold log and error file names</span></a>
<a class="sourceLine" id="cb52-71" data-line-number="71"><span class="va">LOG=${PWD}</span>/<span class="va">${RP}</span>log</a>
<a class="sourceLine" id="cb52-72" data-line-number="72"><span class="va">ERR=$LOG</span>.stderr</a>
<a class="sourceLine" id="cb52-73" data-line-number="73"></a>
<a class="sourceLine" id="cb52-74" data-line-number="74"><span class="co"># print the date/time when the process is starting</span></a>
<a class="sourceLine" id="cb52-75" data-line-number="75"><span class="bu">echo</span> <span class="st">&quot;STARTING at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-76" data-line-number="76"></a>
<a class="sourceLine" id="cb52-77" data-line-number="77"><span class="co"># make a clean slate. remove any files with the name</span></a>
<a class="sourceLine" id="cb52-78" data-line-number="78"><span class="co"># of the error output file</span></a>
<a class="sourceLine" id="cb52-79" data-line-number="79"><span class="fu">rm</span> -f <span class="va">$ERR</span></a>
<a class="sourceLine" id="cb52-80" data-line-number="80"></a>
<a class="sourceLine" id="cb52-81" data-line-number="81"><span class="co"># cycle over the student GitHub names, and for each one *do*</span></a>
<a class="sourceLine" id="cb52-82" data-line-number="82"><span class="co"># the commands that appear before the *done* keyword. Indenting</span></a>
<a class="sourceLine" id="cb52-83" data-line-number="83"><span class="co"># is used to make it easier to read, but is not essential.</span></a>
<a class="sourceLine" id="cb52-84" data-line-number="84"><span class="kw">for</span> <span class="ex">L</span> in <span class="va">$GHNAMES</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb52-85" data-line-number="85"></a>
<a class="sourceLine" id="cb52-86" data-line-number="86">    <span class="bu">echo</span> <span class="st">&quot;Working on </span><span class="va">$L</span><span class="st">, starting at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">&quot;</span>  # print a progress line to stdout</a>
<a class="sourceLine" id="cb52-87" data-line-number="87">    <span class="va">REPO=$GHP</span>/<span class="va">${RP}$L</span>     # <span class="ex">combine</span> variables into new variables that</a>
<a class="sourceLine" id="cb52-88" data-line-number="88">    <span class="bu">echo</span> <span class="va">$REPO</span>            # hold the URL for the repository to be</a>
<a class="sourceLine" id="cb52-89" data-line-number="89">    <span class="va">DEST=$DD</span>/<span class="va">$L</span>           # <span class="ex">cloned</span> and the path where it should be cloned to</a>
<a class="sourceLine" id="cb52-90" data-line-number="90">  </a>
<a class="sourceLine" id="cb52-91" data-line-number="91">    <span class="co"># store the commands themselves into variables. Note the </span></a>
<a class="sourceLine" id="cb52-92" data-line-number="92">    <span class="co"># use of double quotes.</span></a>
<a class="sourceLine" id="cb52-93" data-line-number="93">    <span class="va">CLONE_IT=</span><span class="st">&quot;git clone </span><span class="va">${REPO/</span>github.com<span class="va">/$USER</span>@github.com<span class="va">}</span><span class="st"> </span><span class="va">$DEST</span><span class="st">&quot;</span> </a>
<a class="sourceLine" id="cb52-94" data-line-number="94">    <span class="va">BRANCH_IT=</span><span class="st">&quot;git checkout -B </span><span class="va">$BRANCH</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-95" data-line-number="95">    <span class="va">PUSH_IT=</span><span class="st">&quot;git push -u origin </span><span class="va">$BRANCH</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-96" data-line-number="96">  </a>
<a class="sourceLine" id="cb52-97" data-line-number="97">    </a>
<a class="sourceLine" id="cb52-98" data-line-number="98">    <span class="co"># now, run those commands, chained together by exit-status-AND</span></a>
<a class="sourceLine" id="cb52-99" data-line-number="99">    <span class="co"># operators (so it will stop if any one part fails), while</span></a>
<a class="sourceLine" id="cb52-100" data-line-number="100">    <span class="co"># all the while appending error statements to the Error file. Run it</span></a>
<a class="sourceLine" id="cb52-101" data-line-number="101">    <span class="co"># all within an &quot;if&quot; statement so you can deliver a report as to</span></a>
<a class="sourceLine" id="cb52-102" data-line-number="102">    <span class="co"># whether the whole shebang succeeded or failed.</span></a>
<a class="sourceLine" id="cb52-103" data-line-number="103">    <span class="kw">if</span> <span class="va">$CLONE_IT</span> <span class="op">2&gt;&gt;</span> <span class="va">$ERR</span>  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb52-104" data-line-number="104">        <span class="bu">cd</span> <span class="va">$DEST</span> <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb52-105" data-line-number="105">        <span class="va">$BRANCH_IT</span> <span class="op">2&gt;&gt;</span> <span class="va">$ERR</span>  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb52-106" data-line-number="106">        <span class="va">$PUSH_IT</span> <span class="op">2&gt;&gt;</span> <span class="va">$ERR</span>  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb52-107" data-line-number="107">        <span class="bu">cd</span> <span class="va">$RUNDIR</span>   # at the very end make sure to return to the original working directory</a>
<a class="sourceLine" id="cb52-108" data-line-number="108">    <span class="kw">then</span></a>
<a class="sourceLine" id="cb52-109" data-line-number="109">        <span class="bu">echo</span> <span class="st">&quot;FULL SUCCESS </span><span class="va">$L</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-110" data-line-number="110">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb52-111" data-line-number="111">        <span class="bu">echo</span> <span class="st">&quot;FAILURE SOMEWHERE WITHIN </span><span class="va">$L</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-112" data-line-number="112">        <span class="bu">cd</span> <span class="va">$RUNDIR</span>  # get back to the working directory from which the original command was run.</a>
<a class="sourceLine" id="cb52-113" data-line-number="113">                    <span class="co"># so we are ready to handle the next student repo.</span></a>
<a class="sourceLine" id="cb52-114" data-line-number="114">    <span class="kw">fi</span></a>
<a class="sourceLine" id="cb52-115" data-line-number="115">  </a>
<a class="sourceLine" id="cb52-116" data-line-number="116"><span class="kw">done</span>  # <span class="ex">signifies</span> the end of the for loop we are cycling over</a></code></pre></div>
<p>If my current working directory is where the script resides, I can run it
like this:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="ex">%</span> ./clone-classroom-repos.sh </a></code></pre></div>
<p>And if I wanted to be fancy, I could put the script in a directory (like <code>~/bin</code> perhaps)
that I have included in my <code>PATH</code> variable. In which case I could run it like:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="ex">%</span> clone-classroom-repos.sh </a></code></pre></div>
<p>from anywhere on my computer.</p>
<p>When I run the script in any of those two ways, because I have not provided the
proper number of <em>arguments</em> to the command, it returns a message telling me
what syntax is required to use it (i.e., its <em>usage syntax</em>):</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="ex">%</span> clone-classroom-repos.sh </a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="ex">Syntax</span>:</a>
<a class="sourceLine" id="cb55-3" data-line-number="3">  <span class="ex">clone-classroom-repos.sh</span>  GH_Prefix  Repo_Prefix  Branch  Dir</a>
<a class="sourceLine" id="cb55-4" data-line-number="4">      </a>
<a class="sourceLine" id="cb55-5" data-line-number="5">      <span class="ex">GH_Prefix</span>: the URL of the GitHub site where the repository exists.</a>
<a class="sourceLine" id="cb55-6" data-line-number="6">      <span class="ex">Repo_Prefix</span>: the prefix of the name of each repository to be cloned.</a>
<a class="sourceLine" id="cb55-7" data-line-number="7">      <span class="ex">Branch</span>: the name of the branch to create and switch to in the repository,</a>
<a class="sourceLine" id="cb55-8" data-line-number="8">         <span class="ex">once</span> the repo has been cloned.</a>
<a class="sourceLine" id="cb55-9" data-line-number="9">      <span class="ex">Dir</span>: path to the directory (will be created if necessary) <span class="ex">to</span> clone all</a>
<a class="sourceLine" id="cb55-10" data-line-number="10">         <span class="ex">the</span> repositories to.</a>
<a class="sourceLine" id="cb55-11" data-line-number="11">         </a>
<a class="sourceLine" id="cb55-12" data-line-number="12">   <span class="ex">Example</span>:</a>
<a class="sourceLine" id="cb55-13" data-line-number="13">   </a>
<a class="sourceLine" id="cb55-14" data-line-number="14">      <span class="ex">clone-classroom-repos.sh</span>  https://github.com/CSU-con-gen-bioinformatics-2020  illumina-video-questions- erics-edits  /tmp/illumina-questions</a>
<a class="sourceLine" id="cb55-15" data-line-number="15">      </a></code></pre></div>
<p>That is handy, and the code to do it exists in the script itself. Looking at the output, how many
arguments do you think the script is expecting?</p>
<p>Now, if I wanted to clone all of the student GitHub repos associated with the <code>illumina-video-questions</code>
homework set, and then, once cloned, set up a new git <em>branch</em> called <code>eric-edits</code> so that I can make
edits and/or comments and send those to students via a pull request, here is the command I would give
(remembering, again that the <code>%</code> signifies the command prompt, here):</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="ex">%</span> clone-classroom-repos.sh  https://github.com/CSU-con-gen-bioinformatics-2020  illumina-video-questions- erics-edits  /tmp/illumina-questions</a></code></pre></div>
<p>And when I do, I see output like this:</p>
<pre><code>STARTING at Thu Feb 13 06:02:05 MST 2020
Working on AmandaCicchino, starting at Thu Feb 13 06:02:05 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-AmandaCicchino
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS AmandaCicchino
Working on BrennaF, starting at Thu Feb 13 06:02:07 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-BrennaF
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS BrennaF
Working on CaitlinWells, starting at Thu Feb 13 06:02:08 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-CaitlinWells
FAILURE SOMEWHERE WITHIN CaitlinWells
Working on EllenMCampbell, starting at Thu Feb 13 06:02:09 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-EllenMCampbell
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS EllenMCampbell
Working on FayDong, starting at Thu Feb 13 06:02:10 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-FayDong
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS FayDong
Working on LibbyGH, starting at Thu Feb 13 06:02:12 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-LibbyGH
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS LibbyGH
Working on NathanPhipps, starting at Thu Feb 13 06:02:14 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-NathanPhipps
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS NathanPhipps
Working on RGCheek, starting at Thu Feb 13 06:02:15 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-RGCheek
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS RGCheek
Working on Ronan17, starting at Thu Feb 13 06:02:17 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-Ronan17
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS Ronan17
Working on abeulke, starting at Thu Feb 13 06:02:19 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-abeulke
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS abeulke
Working on carolazari, starting at Thu Feb 13 06:02:21 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-carolazari
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS carolazari
Working on cbossu, starting at Thu Feb 13 06:02:23 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-cbossu
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS cbossu
Working on ccolumbu, starting at Thu Feb 13 06:02:25 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-ccolumbu
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS ccolumbu
Working on elenacorrea, starting at Thu Feb 13 06:02:26 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-elenacorrea
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS elenacorrea
Working on eriqande, starting at Thu Feb 13 06:02:28 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-eriqande
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS eriqande
Working on jenleon07, starting at Thu Feb 13 06:02:29 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-jenleon07
FAILURE SOMEWHERE WITHIN jenleon07
Working on kimhoke, starting at Thu Feb 13 06:02:30 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-kimhoke
FAILURE SOMEWHERE WITHIN kimhoke
Working on kruegg, starting at Thu Feb 13 06:02:30 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-kruegg
FAILURE SOMEWHERE WITHIN kruegg
Working on lauracgoetz, starting at Thu Feb 13 06:02:30 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-lauracgoetz
FAILURE SOMEWHERE WITHIN lauracgoetz
Working on mdrod110, starting at Thu Feb 13 06:02:31 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-mdrod110
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS mdrod110
Working on mgdesaix, starting at Thu Feb 13 06:02:32 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-mgdesaix
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS mgdesaix
Working on raven-wings, starting at Thu Feb 13 06:02:34 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-raven-wings
FAILURE SOMEWHERE WITHIN raven-wings
Working on seamus100, starting at Thu Feb 13 06:02:34 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-seamus100
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS seamus100
Working on taylorbobowski, starting at Thu Feb 13 06:02:36 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-taylorbobowski
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS taylorbobowski
Working on wcfunk, starting at Thu Feb 13 06:02:37 MST 2020
https://github.com/CSU-con-gen-bioinformatics-2020/illumina-video-questions-wcfunk
Branch erics-edits set up to track remote branch erics-edits from origin.
FULL SUCCESS wcfunk</code></pre>
<p>From that report, it is clear that it takes about 1 to 2 seconds to handle each
repository. If I were doing each repository by hand, (i.e. cloning and
branching through a GUI
interface like RStudio’s) each repository would probably take me about 30 seconds
to a minute, with a lot of copying and pasting and chance for errors,
and I would have destroyed my wrists with all the repetitive tasks. So, this
is a HUGE deal.</p>
<p>It is also easy to scan through the results and see, “Holy Moly! These are
some dedicated students!” Everyone has successfully submitted their homework repositories
(and thus we were <code>SUCCESS</code>-ful in cloning them), except for a handful
who were traveling or otherwise occupied and had warned me they wouldn’t
be able to do the assignment.</p>
<p>When all is said and done, I have the following git repositories on my laptop which
I can peruse at my leisure:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="ex">%</span> ls /tmp/illumina-questions/</a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="ex">AmandaCicchino/</span> FayDong/        RGCheek/        carolazari/     elenacorrea/    mgdesaix/       wcfunk/</a>
<a class="sourceLine" id="cb58-3" data-line-number="3"><span class="ex">BrennaF/</span>        LibbyGH/        Ronan17/        cbossu/         eriqande/       seamus100/</a>
<a class="sourceLine" id="cb58-4" data-line-number="4"><span class="ex">EllenMCampbell/</span> NathanPhipps/   abeulke/        ccolumbu/       mdrod110/       taylorbobowski/</a></code></pre></div>
<p>Additionally, in the directory where I ran the command, I have a
file called <code>illumina-video-questions-log.stderr</code> that gives me a more detailed
report of things when they worked or failed.</p>
<p>If you are new to Unix, then the above script likely appears a bit daunting.
Our goal by the end of the chapter is to have described every little piece
of bash syntax needed, so that you will be able to read and understand the
above script. You will thus also be in a good position to start
writing your own scripts to automate tasks and analyses
on your computer.</p>
<p>We will start with an overview of the structure of a script and then
delve into specific areas of syntax. For each area of syntax, we will
provide some examples, and then leave some openings for you, the reader,
to try your own hand at implementing each pattern that you see.</p>
</div>
<div id="the-structure-of-a-bash-script" class="section level2">
<h2><span class="header-section-number">5.2</span> The Structure of a Bash Script</h2>
<p>A bash script is merely a text file that is a collection of different command lines, one
after the next, which the bash shell will run in sequence—one after
the other. If you want to run the script, you must make sure you have set its
permissions to include execute permissions (i.e., <code>chmod ug+x script.sh</code>).</p>
<p>It is important to point out however, that the bash programming syntax that
we will be describing in this chapter is not solely useful in the context
of scripts that are stored in files. Rather, all the programming syntax can still
be used directly on the shell command line itself! This means you can employ
all the little tricks you will learn in this chapter while directly “hacking away”
at the command line. In this context, it is worth noting that if you want to
write multiple distinct commands on a single line, <em>as if they were on separate lines</em>,
you can separate them with a semicolon, <code>;</code>. For example:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="bu">echo</span> <span class="st">&quot;Put this in a file! (and catenate it later...twice!)&quot;</span> <span class="op">&gt;</span> tmp.txt</a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="fu">cat</span> tmp.txt</a>
<a class="sourceLine" id="cb59-3" data-line-number="3"><span class="fu">cat</span> tmp.txt</a></code></pre></div>
<pre><code>## Put this in a file! (and catenate it later...twice!)
## Put this in a file! (and catenate it later...twice!)</code></pre>
<p>Is equivalent to:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="bu">echo</span> <span class="st">&quot;Put this in a file! (and catenate it later...twice!)&quot;</span> <span class="op">&gt;</span> tmp.txt<span class="kw">;</span> <span class="fu">cat</span> tmp.txt<span class="kw">;</span> <span class="fu">cat</span> tmp.txt</a></code></pre></div>
<pre><code>## Put this in a file! (and catenate it later...twice!)
## Put this in a file! (and catenate it later...twice!)</code></pre>
<p>Sometimes when you are writing a script, (or even working on the command line) you might want
a very long expression to be treated as being all part of the same command line, even though
you would like to break it up over multiple lines. A backslash (<code>\</code>) immediately followed by
a line ending (i.e., the “return” key) has the effect of treating the lines that it separates
as all being on the same line.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="co"># this:</span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2"><span class="ex">clone-classroom-repos.sh</span>  \</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">    https://github.com/CSU-con-gen-bioinformatics-2020  \</a>
<a class="sourceLine" id="cb63-4" data-line-number="4">    illumina-video-questions- \</a>
<a class="sourceLine" id="cb63-5" data-line-number="5">    erics-edits  \</a>
<a class="sourceLine" id="cb63-6" data-line-number="6">    /tmp/illumina-questions</a>
<a class="sourceLine" id="cb63-7" data-line-number="7"></a>
<a class="sourceLine" id="cb63-8" data-line-number="8"><span class="co"># is the same as this:</span></a>
<a class="sourceLine" id="cb63-9" data-line-number="9"><span class="ex">clone-classroom-repos.sh</span>  https://github.com/CSU-con-gen-bioinformatics-2020  illumina-video-questions- erics-edits  /tmp/illumina-questions</a></code></pre></div>
<p>Using backslashes (and indenting) in this way can sometimes dramatically improve readability of
your scripts.</p>
<p>You might also notice a number of lines or statements in the script above that start
with a <code>#</code>. The <code>#</code> is known as a <em>comment character</em>. When the bash interpreter is
reading the script, it <em>ignores</em> the comment character <em>and anything following it</em> until
the <em>end of the line</em>. This makes it quite convenient to pepper your scripts with
notes to yourselves or others that can be <em>extremely</em> helpful when you come back
to a piece of code and are trying to remember what it does! Example:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="co"># this might report an error if there is no file</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="co"># named SillyRidiculous.what</span></a>
<a class="sourceLine" id="cb64-3" data-line-number="3"><span class="fu">ls</span> -l SillyRidiculous.what</a></code></pre></div>
<pre><code>## ls: SillyRidiculous.what: No such file or directory</code></pre>
<p>(Note: each line of the the <em>output</em> shown above follows two <code>#</code> symbols. This
is not commenting. It is just the convention that the ‘bookdown’ package uses to signify that
what it is showing you is output, rather than input. No relation, really, to commenting…</p>
<p>In the <code>clone-classroom-repos.sh</code> script, listed above, on the very top line (line 1) you will see
a special statement that follows a <code>#</code> comment character. This is one of the few cases you will
see when the contents after a comment character are <em>not</em> ignored (the other place you will see this
is when preparing additional statements for schedulers for high-performance computing systems!).
In this case the combination <code>#!</code> on the first line is telling Unix to get ready to learn how
to interpret the contents of the script:</p>
<pre><code>#!/bin/bash</code></pre>
<p>The part after the <code>#!</code> is just
the path to the program <code>bash</code> that implements the bash shell. It is telling Unix
how to run the script. While it is common practice to put this top line on a script,
on most systems, if the line is absent, Unix will interpret the script using bash, anyway.</p>
<p>If you ever find yourself having a hard time remembering the order of those first two
symbols (i.e., is it <code>#!</code> or <code>!#</code>?), just remember that it is sometimes called
the <em>shebang</em>. You know the first part should be a comment character so the line is treated
a little differently, but then that has to be followed by the “bang” which is <code>!</code>.</p>
<div id="a-bit-more-on-and" class="section level3">
<h3><span class="header-section-number">5.2.1</span> A bit more on <code>;</code> and <code>&amp;</code></h3>
<p>Recall the semicolon: it provides a way to combine multiple commands on a single line.
In fact, when you think of putting multiple commands on different lines, you could
think of each one being followed by a semicolon. Like this:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="co"># this</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="bu">echo</span> one</a>
<a class="sourceLine" id="cb67-3" data-line-number="3"><span class="bu">echo</span> two</a>
<a class="sourceLine" id="cb67-4" data-line-number="4"></a>
<a class="sourceLine" id="cb67-5" data-line-number="5"><span class="co"># is the same as</span></a>
<a class="sourceLine" id="cb67-6" data-line-number="6"><span class="bu">echo</span> one<span class="kw">;</span></a>
<a class="sourceLine" id="cb67-7" data-line-number="7"><span class="bu">echo</span> two<span class="kw">;</span></a>
<a class="sourceLine" id="cb67-8" data-line-number="8"></a>
<a class="sourceLine" id="cb67-9" data-line-number="9"><span class="co"># is the same as</span></a>
<a class="sourceLine" id="cb67-10" data-line-number="10"><span class="bu">echo</span> one<span class="kw">;</span> <span class="bu">echo</span> two<span class="kw">;</span></a></code></pre></div>
<p>However, there is another character, beyond the semicolon, with which you might
follow commands. It is the <em>single</em> <code>&amp;</code> symbol. Thus,
you could use it like a semicolon, writing and executing this:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="bu">echo</span> one <span class="kw">&amp;</span> <span class="bu">echo</span> two <span class="kw">&amp;</span></a></code></pre></div>
<p>But, if you do that on your Unix system, you should see some numbers and a report
about jobs, like this:</p>
<pre><code>[1] 1007
[2] 1008
one
two
[1]-  Done                    echo one
[2]+  Done                    echo two</code></pre>
<p>Whoa! What the heck is going on there? The <code>&amp;</code> symbol means, “run the command that
came before it, but don’t bother waiting for it to be done before running the next one.”
As a consequence of this, when you run a command followed by a <code>&amp;</code>, the computer returns to you
the job ID numbers for the jobs that have been started, and when they are done, it
also tells you that the jobs that have completed.</p>
<p>If you want to run multiple jobs on your own computer, the <code>&amp;</code> syntax can be helpful.
But, most of the time as a bioinformatician, you will be vying with countless others
to run jobs on a large server or cluster. In those cases there are more refined
systems for allocating jobs, and, as a consequence, you may rarely use the single <code>&amp;</code>
syntax when working on a high performace computing system.</p>
</div>
</div>
<div id="variables" class="section level2">
<h2><span class="header-section-number">5.3</span> Variables</h2>
<p>When your goal is to script up repetitive tasks, one of the main ingredients to your
success is bash’s ability to <em>assign</em> <em>values</em> to <em>variables</em>, and then later, retrieve
those values and replace a variable in your script with its value, a process
known as <em>variable substitution</em>. Both <em>variable assignment</em> and
<em>variable subtitution</em> happen all over the <code>clone-classroom-repos.sh</code>
script, in lines like:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="va">USER=</span>eriqande</a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="va">LOG=${PWD}</span>/<span class="va">${RP}</span>log</a>
<a class="sourceLine" id="cb70-3" data-line-number="3"><span class="va">ERR=$LOG</span>.stderr</a></code></pre></div>
<p>We are going to break this down because it is of central importance.</p>
<div id="assigning-values-to-variables" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Assigning values to variables</h3>
<p>The syntax to assign a value to a variable is, “put the variable on the left, follow it
with an equals sign <strong>with absolutely no spaces around it</strong>, and the put the value
on the right,” like this:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="va">VAR=</span>value</a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="va">HUNGRY=</span><span class="st">&quot;My cat, Oliver&quot;</span></a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="va">SWEET=</span><span class="st">&quot;A chocolately treat&quot;</span></a>
<a class="sourceLine" id="cb71-4" data-line-number="4"><span class="va">MY_FILE=</span>/Users/eriq/Documents/git-repos/eca-bioinf-handbook/eca-bioinf-handbook.Rproj</a>
<a class="sourceLine" id="cb71-5" data-line-number="5"><span class="va">lowercase_variables_work_too=</span><span class="st">&quot;oh yeah.&quot;</span></a>
<a class="sourceLine" id="cb71-6" data-line-number="6"><span class="va">Or_even_MIXtures_of_cases=</span>boing</a></code></pre></div>
<p>Identify the variables and the values in the above.</p>
<p>The names of variables must start with either an upper- or lowercase letter
or an underscore. After that initial character, valid variable names can
then include any combination of underscores, upper- and lowercase letters
and numerals.</p>
<p>In the following, identify the variable names that are valid and those
that are not on each line. After you have made your choices, paste all
these lines into your terminal to see which ones work and which do not.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="va">vaRiAble=</span>value</a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="ex">1_tough_cookie</span>=<span class="st">&quot;hard to eat with false teeth&quot;</span></a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="va">_bring_it_on=</span><span class="st">&quot;A fine musical&quot;</span></a>
<a class="sourceLine" id="cb72-4" data-line-number="4"><span class="ex">PLATE.FIFTEEN</span>=/home/me/labwork/plate_15</a></code></pre></div>
<p>Ha! That is a pretty easy task because syntax highlighter in ‘bookdown’ colors
variables differently than other parts of a script. Oh well, you still get the point!</p>
<p>The value of the variable, on the other hand can be pretty much any string
(as long as it doesn’t confuse the shell with characters like <code>&amp;</code>, <code>;</code>, or <code>!</code>).
The shell typically understands that strings are delimited by whitespace, so, if
your string (value) should include multiple words separated by spaces, you must
enclose them in quotation marks:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="va">NAME=</span><span class="st">&quot;Eric C. Anderson&quot;</span></a></code></pre></div>
<p>You can use either pairs of single quotes (<code>'this is single-quoted'</code>) or double
quotes (<code>&quot;this is double-quoted&quot;</code>), but the shell treats these very differently,
as we will see. Most of the time, in bioinformatics, you will want to be using
double quotes.</p>
<p>If you want to include, in a variable’s value, characters that have special meaning to the shell,
like <code>*</code>, <code>[</code>, <code>{</code>, <code>&amp;</code>, and <code>;</code>, among others, you must enclose the string inside quotation
marks to assign it to your variable:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="va">FOO=</span><span class="st">&quot;bar&amp;grill&quot;</span>  # <span class="ex">works</span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="va">FOO=</span>bar<span class="kw">&amp;</span><span class="ex">grill</span>    # won<span class="st">&#39;t work the way you want it to</span></a></code></pre></div>
</div>
<div id="accessing-values-from-variables" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Accessing values from variables</h3>
<p>This is called “variable substitution.” Remember, when you want something from someone, (or even
just from a variable) it might cost you some money. Which is how you can
remember that you need to use the <code>$</code> to access values from variables. The <code>$</code> tells the
shell that you want the value of the variable, in a process called <em>variable substitution</em>. It is
called that, because if you write <code>$VAR</code>, somewhere in a command line, then
the shell will happily go along and substitute the <em>value</em> of the variable <code>$VAR</code> in place of the variable
itself, <em>after</em> which the shell will evaluate the command line.</p>
<p>If you have a variable called <code>VAR</code>, the writing <code>$VAR</code> subtitutes its value on the command line.
The same occurs if you write <code>${VAR}</code>. The latter is a little more formal, but is also, in
some sense a little more flexible, because it lets you append text immediately after the variable:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="va">FIRST_PART=</span>oxy</a>
<a class="sourceLine" id="cb75-2" data-line-number="2"></a>
<a class="sourceLine" id="cb75-3" data-line-number="3"><span class="co"># this works:</span></a>
<a class="sourceLine" id="cb75-4" data-line-number="4"><span class="bu">echo</span> <span class="st">&quot;I like the word </span><span class="va">${FIRST_PART}</span><span class="st">moron&quot;</span></a>
<a class="sourceLine" id="cb75-5" data-line-number="5"></a>
<a class="sourceLine" id="cb75-6" data-line-number="6"><span class="co"># this doesn&#39;t</span></a>
<a class="sourceLine" id="cb75-7" data-line-number="7"><span class="bu">echo</span> <span class="st">&quot;I like the word </span><span class="va">$FIRST_PARTmoron</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb75-8" data-line-number="8"></a>
<a class="sourceLine" id="cb75-9" data-line-number="9"><span class="co"># but this would</span></a>
<a class="sourceLine" id="cb75-10" data-line-number="10"><span class="bu">echo</span> <span class="st">&quot;Remove the stain with </span><span class="va">$FIRST_PART</span><span class="st">-clean&quot;</span></a></code></pre></div>
<pre><code>## I like the word oxymoron
## I like the word 
## Remove the stain with oxy-clean</code></pre>
<p>In the case above that does not work, the shell is subtituting the value
of the variable <code>FIRST_PARTmoron</code> which actually does not exist, so
it substitutes nothing (and doesn’t even give you an error). This type
of mistake typically occurs when you forget the the underscore is part of
a valid variable name, like:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="va">GENUS=</span>Oncorhynhus</a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="va">SPECIES=</span>mykiss</a>
<a class="sourceLine" id="cb77-3" data-line-number="3"></a>
<a class="sourceLine" id="cb77-4" data-line-number="4"><span class="bu">cd</span> <span class="va">$GENUS_$SPECIES</span>  # Fail!</a>
<a class="sourceLine" id="cb77-5" data-line-number="5"></a>
<a class="sourceLine" id="cb77-6" data-line-number="6"><span class="bu">cd</span> <span class="va">${GENUS}</span>_<span class="va">${SPECIES}</span>  # Works!</a></code></pre></div>
<p><strong>Now it is your turn</strong>: save your three favorite foods into
the variables ONE, TWO, and THREE, and then use the <code>echo</code> command
to print <code>My three favorite foods are...</code> where you include
those foods via variable substitution:</p>
<pre><code></code></pre>
<p>Are we starting to feel the power of Unix scripting yet?</p>
</div>
<div id="what-does-the-shell-do-with-the-value-substituted-for-a-variable" class="section level3">
<h3><span class="header-section-number">5.3.3</span> What does the shell do with the value substituted for a variable?</h3>
<p>This is a great question, and it gets at the heart of why Unix is so powerful
for scripting. Recall that variable substitution occurs before command evaluation.
So, basically, after variable substitution, the shell has a command line that includes
the values instead of the variables. Then it just evaluates that command line. So, what
happens to the values that have been substituted for the variables depends on what context
they appear in, in the command line!</p>
<p>Follow along with this example:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="co"># Start by assigning to DIR the absolute path of a directory you often go to</span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="co"># Note, you should use a path from your own computer!</span></a>
<a class="sourceLine" id="cb79-3" data-line-number="3"><span class="va">DIR=</span>/Users/eriq/Documents/git-repos/eca-bioinf-handbook</a>
<a class="sourceLine" id="cb79-4" data-line-number="4"></a>
<a class="sourceLine" id="cb79-5" data-line-number="5"><span class="co"># Now, note that we can do different things with that variable</span></a>
<a class="sourceLine" id="cb79-6" data-line-number="6"><span class="co"># depending on how/where we put it in a command line.</span></a>
<a class="sourceLine" id="cb79-7" data-line-number="7"></a>
<a class="sourceLine" id="cb79-8" data-line-number="8"><span class="co"># print it</span></a>
<a class="sourceLine" id="cb79-9" data-line-number="9"><span class="bu">echo</span> <span class="va">$DIR</span></a>
<a class="sourceLine" id="cb79-10" data-line-number="10"></a>
<a class="sourceLine" id="cb79-11" data-line-number="11"><span class="co"># list its contents</span></a>
<a class="sourceLine" id="cb79-12" data-line-number="12"><span class="fu">ls</span> <span class="va">$DIR</span></a>
<a class="sourceLine" id="cb79-13" data-line-number="13"></a>
<a class="sourceLine" id="cb79-14" data-line-number="14"><span class="co"># from your home directory (reached with `cd` and nothing after it)</span></a>
<a class="sourceLine" id="cb79-15" data-line-number="15"><span class="co"># you can go directly to DIR like so:</span></a>
<a class="sourceLine" id="cb79-16" data-line-number="16"><span class="bu">cd</span></a>
<a class="sourceLine" id="cb79-17" data-line-number="17"><span class="bu">cd</span> <span class="va">$DIR</span></a>
<a class="sourceLine" id="cb79-18" data-line-number="18"></a>
<a class="sourceLine" id="cb79-19" data-line-number="19"><span class="co"># If you just put $DIR on the command line by itself, the shell</span></a>
<a class="sourceLine" id="cb79-20" data-line-number="20"><span class="co"># interprets it as a command, and tries to execute it, which give an error:</span></a>
<a class="sourceLine" id="cb79-21" data-line-number="21"><span class="va">$DIR</span></a>
<a class="sourceLine" id="cb79-22" data-line-number="22"></a>
<a class="sourceLine" id="cb79-23" data-line-number="23"><span class="co"># On the other hand, if you wanted to make a new variable:</span></a>
<a class="sourceLine" id="cb79-24" data-line-number="24"><span class="va">GODIR=</span><span class="st">&quot;cd </span><span class="va">$DIR</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb79-25" data-line-number="25"></a>
<a class="sourceLine" id="cb79-26" data-line-number="26"><span class="co"># then, that would work as a command on its own:</span></a>
<a class="sourceLine" id="cb79-27" data-line-number="27"><span class="bu">cd</span></a>
<a class="sourceLine" id="cb79-28" data-line-number="28"><span class="va">$GODIR</span></a></code></pre></div>
<p>Oh! Now I am getting excited. Notice that in the <code>clone-classroom-repos.sh</code> script I
did this quite a bit, making a few different command lines…</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb80-1" data-line-number="1">    <span class="co"># store the commands themselves into variables. Note the </span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2">    <span class="co"># use of double quotes.</span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3">    <span class="va">CLONE_IT=</span><span class="st">&quot;git clone </span><span class="va">${REPO/</span>github.com<span class="va">/$USER</span>@github.com<span class="va">}</span><span class="st"> </span><span class="va">$DEST</span><span class="st">&quot;</span> </a>
<a class="sourceLine" id="cb80-4" data-line-number="4">    <span class="va">BRANCH_IT=</span><span class="st">&quot;git checkout -B </span><span class="va">$BRANCH</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb80-5" data-line-number="5">    <span class="va">PUSH_IT=</span><span class="st">&quot;git push -u origin </span><span class="va">$BRANCH</span><span class="st">&quot;</span></a></code></pre></div>
<p>…that I would then call later:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb81-1" data-line-number="1">    <span class="va">$CLONE_IT</span> <span class="op">2&gt;&gt;</span> <span class="va">$ERR</span>  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb81-2" data-line-number="2">        <span class="bu">cd</span> <span class="va">$DEST</span> <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb81-3" data-line-number="3">        <span class="va">$BRANCH_IT</span> <span class="op">2&gt;&gt;</span> <span class="va">$ERR</span>  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb81-4" data-line-number="4">        <span class="va">$PUSH_IT</span> <span class="op">2&gt;&gt;</span> <span class="va">$ERR</span>  <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb81-5" data-line-number="5">        <span class="bu">cd</span> <span class="va">$RUNDIR</span></a></code></pre></div>
<p>While you can count on subtituted variables to be evaluated in context,
the above-displayed behaviors of the shell don’t always work. Because of the
intricacies of how the bash shell command parser works, and the order of parsing
and variable substition, there are times when the string which is a substituted
variable <em>will not</em> be evaluated exactly as that same string would be evaluated if
it were just text in a script. Typically the differences in behavior are found
when <code>=</code> signs or redirects are found in the string.</p>
<p>An example should make this clear:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb82-1" data-line-number="1"><span class="co"># here is a command that is a simple string</span></a>
<a class="sourceLine" id="cb82-2" data-line-number="2"><span class="bu">echo</span> me oh my, i like pie.</a>
<a class="sourceLine" id="cb82-3" data-line-number="3"></a>
<a class="sourceLine" id="cb82-4" data-line-number="4"><span class="co"># if we run it as a command we see:</span></a>
<a class="sourceLine" id="cb82-5" data-line-number="5"><span class="ex">me</span> oh my, i like pie.</a>
<a class="sourceLine" id="cb82-6" data-line-number="6"></a>
<a class="sourceLine" id="cb82-7" data-line-number="7"><span class="co"># here is that same command stored in a variable</span></a>
<a class="sourceLine" id="cb82-8" data-line-number="8"><span class="va">boing=</span><span class="st">&quot;echo me oh my, i like pie.&quot;</span></a>
<a class="sourceLine" id="cb82-9" data-line-number="9"></a>
<a class="sourceLine" id="cb82-10" data-line-number="10"><span class="co"># Variable substitution for boing on the command line looks like:</span></a>
<a class="sourceLine" id="cb82-11" data-line-number="11"><span class="va">$boing</span></a>
<a class="sourceLine" id="cb82-12" data-line-number="12"></a>
<a class="sourceLine" id="cb82-13" data-line-number="13"><span class="co"># and the result we see is:</span></a>
<a class="sourceLine" id="cb82-14" data-line-number="14"><span class="ex">me</span> oh my, i like pie.</a>
<a class="sourceLine" id="cb82-15" data-line-number="15"></a>
<a class="sourceLine" id="cb82-16" data-line-number="16"><span class="co"># However, if we type this:</span></a>
<a class="sourceLine" id="cb82-17" data-line-number="17"><span class="bu">echo</span> me oh my, i like pie. <span class="op">&gt;</span> /tmp/out</a>
<a class="sourceLine" id="cb82-18" data-line-number="18"></a>
<a class="sourceLine" id="cb82-19" data-line-number="19"><span class="co"># then the the file /tmp/out will hold:</span></a>
<a class="sourceLine" id="cb82-20" data-line-number="20"><span class="ex">me</span> oh my, i like pie.</a>
<a class="sourceLine" id="cb82-21" data-line-number="21"></a>
<a class="sourceLine" id="cb82-22" data-line-number="22"><span class="co"># But if we say</span></a>
<a class="sourceLine" id="cb82-23" data-line-number="23"><span class="va">bonk=</span><span class="st">&quot;echo me oh my, i like pie. &gt; /tmp/out&quot;</span></a>
<a class="sourceLine" id="cb82-24" data-line-number="24"></a>
<a class="sourceLine" id="cb82-25" data-line-number="25"><span class="co"># And do:</span></a>
<a class="sourceLine" id="cb82-26" data-line-number="26"><span class="va">$bonk</span></a>
<a class="sourceLine" id="cb82-27" data-line-number="27"></a>
<a class="sourceLine" id="cb82-28" data-line-number="28"><span class="co"># We get:</span></a>
<a class="sourceLine" id="cb82-29" data-line-number="29"><span class="ex">me</span> oh my, i like pie. <span class="op">&gt;</span> /tmp/out</a>
<a class="sourceLine" id="cb82-30" data-line-number="30"></a>
<a class="sourceLine" id="cb82-31" data-line-number="31"><span class="co"># which is clearly not the same thing</span></a></code></pre></div>
<p>In the above, example, when <code>&gt;</code> occurred within a variable,
the command parser did not recognize it as the redirection
operator.</p>
<p>Here is another example: imagine that we want to assign three values to
three different variables. If we just assigned them on the command line
we could do something like this:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="co"># simple variable assignment</span></a>
<a class="sourceLine" id="cb83-2" data-line-number="2"><span class="va">A=</span>one; <span class="va">B=</span>two; <span class="va">C=</span>three</a>
<a class="sourceLine" id="cb83-3" data-line-number="3"></a>
<a class="sourceLine" id="cb83-4" data-line-number="4"><span class="co"># after that, if we do:</span></a>
<a class="sourceLine" id="cb83-5" data-line-number="5"><span class="bu">echo</span> <span class="va">$A</span> <span class="va">$B</span> <span class="va">$C</span></a>
<a class="sourceLine" id="cb83-6" data-line-number="6"></a>
<a class="sourceLine" id="cb83-7" data-line-number="7"><span class="co"># we get</span></a>
<a class="sourceLine" id="cb83-8" data-line-number="8"><span class="ex">one</span> two three</a></code></pre></div>
<p>But, what if we wanted to assign three values to three variables
within a string that gets assigned to a variable, and
then substitute that variable on the command line to actually assign those
variables. For example:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="va">ASSIGNMENTS=</span><span class="st">&quot;D=four; E=five; F=six&quot;</span></a>
<a class="sourceLine" id="cb84-2" data-line-number="2"></a>
<a class="sourceLine" id="cb84-3" data-line-number="3"><span class="co"># then try to substitute ASSIGNMENTS to actually make</span></a>
<a class="sourceLine" id="cb84-4" data-line-number="4"><span class="co"># the variable assignments:</span></a>
<a class="sourceLine" id="cb84-5" data-line-number="5"><span class="va">$ASSIGNMENTS</span> </a>
<a class="sourceLine" id="cb84-6" data-line-number="6"></a>
<a class="sourceLine" id="cb84-7" data-line-number="7"><span class="co"># bash replies with an error message</span></a>
<a class="sourceLine" id="cb84-8" data-line-number="8"><span class="ex">-bash</span>: D=four<span class="kw">;</span><span class="bu">:</span> command not found</a></code></pre></div>
<p>It is clear that bash is not able to interpret the <code>=</code> sign as the assignment
operator in this context.</p>
<p>We can solve this problem by using the <code>eval</code> keyword to tell bash to
explicitly evaluate the command
line a second time after variable substitution has occurred.
Observe. In the latter case:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb85-1" data-line-number="1"><span class="co"># create variable that is a line with assignments</span></a>
<a class="sourceLine" id="cb85-2" data-line-number="2"><span class="va">ASSIGNMENTS=</span><span class="st">&quot;D=four; E=five; F=six&quot;</span></a>
<a class="sourceLine" id="cb85-3" data-line-number="3"></a>
<a class="sourceLine" id="cb85-4" data-line-number="4"><span class="co"># evaluate that line after variable substitution:</span></a>
<a class="sourceLine" id="cb85-5" data-line-number="5"><span class="bu">eval</span> <span class="va">$ASSIGNMENTS</span></a>
<a class="sourceLine" id="cb85-6" data-line-number="6"></a>
<a class="sourceLine" id="cb85-7" data-line-number="7"><span class="co"># see that the variables D, E, and F have values assigned:</span></a>
<a class="sourceLine" id="cb85-8" data-line-number="8"><span class="bu">echo</span> <span class="va">$D</span>, <span class="va">$E</span>, <span class="va">$F</span></a>
<a class="sourceLine" id="cb85-9" data-line-number="9"></a>
<a class="sourceLine" id="cb85-10" data-line-number="10"><span class="co"># cool!</span></a></code></pre></div>
<p>And in the former:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="co"># assign complete command line with redirection to bonk</span></a>
<a class="sourceLine" id="cb86-2" data-line-number="2"><span class="va">bonk=</span><span class="st">&quot;echo me oh my, i like pie. &gt; /tmp/out&quot;</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3"></a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="co"># evalute command line after $bonk&#39;s value is substituted</span></a>
<a class="sourceLine" id="cb86-5" data-line-number="5"><span class="bu">eval</span> <span class="va">$bonk</span></a>
<a class="sourceLine" id="cb86-6" data-line-number="6"></a>
<a class="sourceLine" id="cb86-7" data-line-number="7"><span class="co"># now /tmp/out holds the contents:</span></a>
<a class="sourceLine" id="cb86-8" data-line-number="8"><span class="ex">me</span> oh my, i like pie.</a></code></pre></div>

<div class="rmdtip">
The <code>eval</code> keyword is not often used in <code>bash</code>, but it is very useful in bioinformatics
for evaluating command lines, <em>that include their redirection specifiers</em>, and which have
been stored in a variable. Why is this important? If your script stores a command line (after
variable subtstitution) in a variable, then you can print that command line before evaluating
it. When developing your scripts this makes it easy to test your command lines (just echo it,
copy it, and paste it into a shell you have open for testing). When running scripts, if you print
out each line to a log, it is easier to go back to ones that failed and figure out why.
</div>

<p><strong>Your Turn</strong>: Make a variable called <code>YELL_IT</code> that holds the command
line that would print the line “Oh, I just gotta be me” and redirect
it into the file <code>yawp.txt</code>. Once you have done that, do variable
substitution without, and then with, the <code>eval</code> keyword. Which one
actually gets the job done?</p>
<pre><code></code></pre>
<p>Remember that in RStudio, if you highlight some text and do CMD-Option-Return on a Mac,
the text gets sent to the RStudio Unix Terminal. (I suspect the PC equivalent is
cntrl-alt-return). That can be helpful for quickly testing lines you have written.</p>
</div>
<div id="double-and-single-quotation-marks-and-variable-substitution" class="section level3">
<h3><span class="header-section-number">5.3.4</span> Double and Single Quotation Marks and Variable Substitution</h3>
<p>Quite often you will want to save a value to a variable that, itself,
includes other variables. In other words, you want to do variable
subtition on the value you are assigning to the variable. Double quote
let you do this: variable substition will proceed within double quotes:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="va">FOO=</span>sandwiches</a>
<a class="sourceLine" id="cb88-2" data-line-number="2"><span class="va">BAR=</span><span class="st">&quot;I like </span><span class="va">$FOO</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb88-3" data-line-number="3"><span class="bu">echo</span> <span class="va">$BAR</span></a></code></pre></div>
<pre><code>## I like sandwiches</code></pre>
<p>However, inside single quotes, variable subtitution will not occur:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="va">FOO=</span>sandwiches</a>
<a class="sourceLine" id="cb90-2" data-line-number="2"><span class="va">BAR=</span><span class="st">&#39;I like $FOO&#39;</span></a>
<a class="sourceLine" id="cb90-3" data-line-number="3"><span class="bu">echo</span> <span class="va">$BAR</span></a></code></pre></div>
<pre><code>## I like $FOO</code></pre>
<p>Each behavior has its uses, but most of the time, as I said, you will be wanting to use
double quotes.</p>
<p><strong>Now it is your turn</strong>: Save three pairs of foods that you like (for example,
“cookies &amp; cream” or “bananas &amp; walnuts”) into
three variables, <code>PAIR_ONE</code>, <code>PAIR_TWO</code>, and <code>PAIR_THREE</code>. Then combine those into
a variable called <code>SENTENCE</code> and print it with <code>echo</code>, so that the result looks something
like: “I like cookies &amp; cream, and bananas &amp; walnuts, and rooibos and milk.”</p>
<pre><code></code></pre>
</div>
<div id="one-useful-fancy-variable-substitution-method" class="section level3">
<h3><span class="header-section-number">5.3.5</span> One useful, fancy, variable-substitution method</h3>
<p>Bash is full of fancy variable-substitution embellishments. One that
I use all the time replaces strings in a variable with other strings.
Check this out:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="va">FILE=</span>my_picture.jpg</a>
<a class="sourceLine" id="cb93-2" data-line-number="2"><span class="bu">echo</span> <span class="va">$FILE</span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3"><span class="bu">echo</span> <span class="va">${FILE/</span>jpg<span class="va">/</span>png<span class="va">}</span></a>
<a class="sourceLine" id="cb93-4" data-line-number="4"><span class="bu">echo</span> <span class="va">${FILE/</span>my<span class="va">/</span>your<span class="va">}</span></a></code></pre></div>
<pre><code>## my_picture.jpg
## my_picture.png
## your_picture.jpg</code></pre>
<p>That turns out to be some powerful stuff.</p>
</div>
<div id="variable-arrays" class="section level3">
<h3><span class="header-section-number">5.3.6</span> Variable arrays</h3>
<p>Most programming languages allow you to store things in arrays. In R they
are called <em>vectors</em> (or, more generally, <em>lists</em>). The same is true in
<code>bash</code>: you can store a number of values into a single variable, and then
access each individual value one at at time. This can be quite useful sometimes.</p>
<p>The syntax for assigning values to array variable is like this:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="va">ArrayVariable=(</span>words or things <span class="st">&#39;or stuff&#39;</span> separated <span class="st">&#39;by whitespace&#39;</span><span class="va">)</span></a></code></pre></div>
<p>In other words, wrap the items inside a pair of parentheses, with white-space
separating them, and the shell will break those up into different, <em>numbered</em>
parts of the array variable. It is important to note that single-quoted groups of words
are treated as single values that will be assigned to an array element as a group.
(Though the same is not true of double-quoted values…)</p>
<p>Once values are stored in an array, how do we access them, i.e., what sort
of variable subtitution can we do?</p>
<p>Well, if we just do the traditional variable substitution, like <code>${ArrayVariable}</code> or
<code>$ArrayVariable</code>, then we just get the first element:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="co"># doing this</span></a>
<a class="sourceLine" id="cb96-2" data-line-number="2"><span class="bu">echo</span> <span class="va">$ArrayVariable</span></a>
<a class="sourceLine" id="cb96-3" data-line-number="3"></a>
<a class="sourceLine" id="cb96-4" data-line-number="4"><span class="co"># produces this:</span></a>
<a class="sourceLine" id="cb96-5" data-line-number="5"><span class="ex">words</span></a></code></pre></div>
<p>That is not super helpful. So, to get each separate element we can
<em>subscript</em> the array by adding a number in square brackets inside the
curly braces, like this:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="co"># Doing this:</span></a>
<a class="sourceLine" id="cb97-2" data-line-number="2"><span class="bu">echo</span> <span class="va">${ArrayVariable[2]}</span></a>
<a class="sourceLine" id="cb97-3" data-line-number="3"></a>
<a class="sourceLine" id="cb97-4" data-line-number="4"><span class="co"># gives:</span></a>
<a class="sourceLine" id="cb97-5" data-line-number="5"><span class="ex">things</span></a></code></pre></div>
<p>The subscripting is done with 0 as the starting value, so <code>${ArrayVariable[0]}</code>
will give <code>words</code>, and <code>${ArrayVariable[1]}</code> gives <code>or</code>.
Here is a <code>for</code> loop (see below) that prints each of the different subscripts
followed by their associated values:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="co"># this loop...</span></a>
<a class="sourceLine" id="cb98-2" data-line-number="2"><span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{0..5}</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb98-3" data-line-number="3">  <span class="bu">echo</span> <span class="va">$i</span>: <span class="va">${ArrayVariable[$i]}</span></a>
<a class="sourceLine" id="cb98-4" data-line-number="4"><span class="kw">done</span></a>
<a class="sourceLine" id="cb98-5" data-line-number="5"></a>
<a class="sourceLine" id="cb98-6" data-line-number="6"><span class="co"># produces output like:</span></a>
<a class="sourceLine" id="cb98-7" data-line-number="7"><span class="ex">0</span>: words</a>
<a class="sourceLine" id="cb98-8" data-line-number="8"><span class="ex">1</span>: or</a>
<a class="sourceLine" id="cb98-9" data-line-number="9"><span class="ex">2</span>: things</a>
<a class="sourceLine" id="cb98-10" data-line-number="10"><span class="ex">3</span>: or stuff</a>
<a class="sourceLine" id="cb98-11" data-line-number="11"><span class="ex">4</span>: separated</a>
<a class="sourceLine" id="cb98-12" data-line-number="12"><span class="ex">5</span>: by whitespace</a></code></pre></div>
<p>There are a few more important ways of accessing array variable values:</p>
<p>You can get all the values at once as a single string. There are two
ways you can do this: either <code>${ArrayVariable[*]}</code> or
<code>${ArrayVariable[@]}</code>. These two methods differ only when you have wrapped the variable up
in double quotation marks, but that involves some serious bash arcana.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="co"># when just printing output, both of these give the same result</span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2"><span class="bu">echo</span> <span class="va">${ArrayVariable[*]}</span></a>
<a class="sourceLine" id="cb99-3" data-line-number="3"><span class="bu">echo</span> <span class="va">${ArrayVariable[@]}</span></a>
<a class="sourceLine" id="cb99-4" data-line-number="4"></a>
<a class="sourceLine" id="cb99-5" data-line-number="5"><span class="co"># producing:</span></a>
<a class="sourceLine" id="cb99-6" data-line-number="6"><span class="ex">words</span> or things or stuff separated by whitespace</a>
<a class="sourceLine" id="cb99-7" data-line-number="7"><span class="ex">words</span> or things or stuff separated by whitespace</a></code></pre></div>
<p>And finally, the <em>length</em> of the array (meaning, how many elements
are in it) is found with a peculiar syntax <code>${#ArrayVariable[@]}</code></p>
<div class="sourceCode" id="cb100"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="co"># this:</span></a>
<a class="sourceLine" id="cb100-2" data-line-number="2"><span class="bu">echo</span> <span class="va">${#ArrayVariable[@]}</span></a>
<a class="sourceLine" id="cb100-3" data-line-number="3"></a>
<a class="sourceLine" id="cb100-4" data-line-number="4"><span class="co"># produces:</span></a>
<a class="sourceLine" id="cb100-5" data-line-number="5"><span class="ex">6</span></a></code></pre></div>
<p>Although bash arrays can be quite useful, I must admit that I only
use them in a few bioinformatic situtations—primarily when I want
to break a single row of white-space delimited columns (that I grabbed
from a file, for example) into its consituent words that I can
then manipulate.</p>
<p><strong>Your turn</strong>: Create a variable called <code>MY_ARRAY</code> in which each
element is the first name of 5 different people in our bioinformatics class.
Then print the 1st, 2nd and 5th of them each on a separate line.</p>
<pre><code></code></pre>
</div>
</div>
<div id="evaluate-a-command-and-substitute-the-result-on-the-command-line" class="section level2">
<h2><span class="header-section-number">5.4</span> Evaluate a command and substitute the result on the command line</h2>
<p>Sometimes what you want to put on a command line isn’t just a variable
you have previously defined but rather the result of a command that
is executed. We see this in <code>clone-classroom-repos.sh</code> around line 75:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="bu">echo</span> <span class="st">&quot;STARTING at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">&quot;</span></a></code></pre></div>
<p>In general, if you put a command inside a <code>$()</code>, like <code>$(command)</code> it means take the output of
the command and insert it into the command line.</p>
<p>You can even assign the result to a variable, like <code>RESULT=$(command)</code>.</p>
<p>For example, try this:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb103-1" data-line-number="1"><span class="co"># what do you think this is doing?</span></a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="va">HOME_LIST=$(</span><span class="fu">ls</span> -l ~<span class="va">)</span></a>
<a class="sourceLine" id="cb103-3" data-line-number="3"></a>
<a class="sourceLine" id="cb103-4" data-line-number="4"><span class="co"># what about this?</span></a>
<a class="sourceLine" id="cb103-5" data-line-number="5"><span class="bu">echo</span> <span class="va">$HOME_LIST</span></a></code></pre></div>
<p>Whoa! What happened to all my carriage returns? The results gets put onto the command line and
parsed there. The command line parser sometimes treats line endings as just more whitespace,
and it converts all runs of whitespace to a single space…</p>
<p><strong>Your Turn</strong>: Make a three line script. In the first one, assign the output
of the <code>date</code> command to the variable <code>BEFORE</code>, then give this command <code>sleep 5</code>,
then in the third line, assign the output of the <code>date</code> command to the variable
<code>AFTER</code>. Evaluate all three lines at once (by CMD-OPTION-Return or copying and pasting
into the terminal.) Then, look at <code>BEFORE</code> and <code>AFTER</code> to compare.</p>
</div>
<div id="groupingcollecting-output-from-multiple-commands-commands-and-commands" class="section level2">
<h2><span class="header-section-number">5.5</span> Grouping/Collecting output from multiple commands: <code>(commands)</code> and <code>{ commands; }</code></h2>
<p>Quite often you may wish to think of the result of a group of commands (taken together such
a group is called “list” in bash parlance) as being the result of a single command. Typical
use cases are when you want to redirect the output from three separate commands into a
single file. For example if you want to put the contents of two files, FileA and FileB,
into a file called “Both,” but separate the contents of FileA and FileB by a short line of
x’s, you could do this:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb104-1" data-line-number="1"><span class="fu">cat</span> FileA <span class="op">&gt;</span> Both</a>
<a class="sourceLine" id="cb104-2" data-line-number="2"><span class="bu">echo</span> xxxxxxxxxxxx <span class="op">&gt;&gt;</span> Both</a>
<a class="sourceLine" id="cb104-3" data-line-number="3"><span class="fu">cat</span> FileB <span class="op">&gt;&gt;</span> Both</a></code></pre></div>
<p>But, it is easier to see what is going on and to maintain code that looks like this:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="kw">(</span><span class="fu">cat</span> FileA<span class="kw">;</span> <span class="bu">echo</span> xxxxxxxxxxxx<span class="kw">;</span> <span class="fu">cat</span> FileB<span class="kw">)</span> <span class="op">&gt;</span> <span class="ex">Both</span></a></code></pre></div>
<p>or like:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw">{</span> <span class="fu">cat</span> FileA<span class="kw">;</span> <span class="bu">echo</span> xxxxxxxxxxxx<span class="kw">;</span> <span class="fu">cat</span> FileB<span class="kw">;}</span> <span class="op">&gt;</span> <span class="ex">Both</span></a></code></pre></div>
<p>Both parentheses and curly braces can be used to group commands into one
<em>grouped</em> command, thereby making it easy to redirect the output from
that command. These two forms of grouping have subtle differences.</p>
<p>When you group commands into parentheses, all the commands get
evaluated in a separate <em>subshell</em>. By contrast, grouped commands
inside curly braces are all evaluated within the current shell. In
many cases this will make almost no difference to you. However, if you
are assigning variable values within the grouped commands, then, using
parentheses for grouping, you won’t have access to those variable values
in the current shell:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="co"># include a variable assignment in parentheses</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="kw">(</span><span class="fu">cat</span> FileA<span class="kw">;</span> <span class="bu">echo</span> xxxxx<span class="kw">;</span> <span class="fu">cat</span> FileB<span class="kw">;</span> <span class="va">NewVar=</span>15<span class="kw">)</span> <span class="op">&gt;</span> <span class="ex">Both</span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3"></a>
<a class="sourceLine" id="cb107-4" data-line-number="4"><span class="co"># if you try this:</span></a>
<a class="sourceLine" id="cb107-5" data-line-number="5"><span class="va">$NewVar</span></a>
<a class="sourceLine" id="cb107-6" data-line-number="6"></a>
<a class="sourceLine" id="cb107-7" data-line-number="7"><span class="co"># the shell knows nothing about it</span></a></code></pre></div>
<p>Using curly braces, the variable assignments will be known in
the current shell you are in:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="co"># include a variable assignment in curly braces</span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="kw">{</span> <span class="fu">cat</span> FileA<span class="kw">;</span> <span class="bu">echo</span> xxxxx<span class="kw">;</span> <span class="fu">cat</span> FileB<span class="kw">;</span> <span class="va">NewVar=</span>15; <span class="kw">}</span> <span class="op">&gt;</span> <span class="ex">Both</span></a>
<a class="sourceLine" id="cb108-3" data-line-number="3"></a>
<a class="sourceLine" id="cb108-4" data-line-number="4"><span class="co"># Now, if you try this:</span></a>
<a class="sourceLine" id="cb108-5" data-line-number="5"><span class="va">$NewVar</span></a>
<a class="sourceLine" id="cb108-6" data-line-number="6"></a>
<a class="sourceLine" id="cb108-7" data-line-number="7"><span class="co"># the shell knows that $NewVar has a value:</span></a>
<a class="sourceLine" id="cb108-8" data-line-number="8"><span class="ex">15</span></a></code></pre></div>
<p>The syntax for using curly braces for grouping, however, is more finicky than
it is with parentheses: the left curly brace cannot be touching anything on the
right, and the last command in the group must be followed by a semicolon or a newline.
Thus, both of these would fail:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb109-1" data-line-number="1">{<span class="ex">cat</span> FileA<span class="kw">;</span> <span class="bu">echo</span> xxxxxxxxxxxx<span class="kw">;</span> <span class="fu">cat</span> FileB<span class="kw">;</span>} <span class="op">&gt;</span> <span class="ex">Both</span></a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="kw">{</span> <span class="fu">cat</span> FileA<span class="kw">;</span> <span class="bu">echo</span> xxxxxxxxxxxx<span class="kw">;</span> <span class="fu">cat</span> FileB<span class="kw">}</span> <span class="op">&gt;</span> <span class="ex">Both</span></a></code></pre></div>
</div>
<div id="exit-status" class="section level2">
<h2><span class="header-section-number">5.6</span> Exit Status</h2>
<p>When you run a command in Unix, that command might do a lot of different things,
like print something to <em>stdout</em>, or copy a file around, or delete a file,
or index a whole genome. Regardless of all the things a command might do, it
also should let the operating system know whether it was successful or not. The
<em>exit status</em> of a Unix command records whether it finished its task successfully
or not.
It is important to understand how exit statuses work so that you can
design bioinformatic pipelines that will stop when something has gone wrong, and will
let you know about that.</p>
<p>If a command exits normally (SUCCESS!) the exit status is 0. If the command does
not exit normally (it may have been unsuccessful) then its exit status will
be anything but 0. Some programs, when they fail, return a non-zero integer as their
exit status, and the value can tell you what kind of error occurred. Other programs might
just return 1.</p>
<p>Exit statuses are not typically seen by the user, but they do get passed to the
shell. You can always access the exit status of the last command with <code>$?</code>. You can
remember that because, with the question mark, it is kind of like you are asking
the operating system, “What’s up!!??”.</p>
<p>Here is an example: if we try to list a file, using <code>ls</code>, that exists, the file gets listed
and the exit status is 0 (SUCCESS!). If the file does not exist we get an error message
and an exit status of 1 (NO_SUCCESS!).</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="co"># list a file we know exists</span></a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="ex">%</span> ls -d ~/Documents </a>
<a class="sourceLine" id="cb110-3" data-line-number="3"><span class="ex">/Users/eriq/Documents/</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4"></a>
<a class="sourceLine" id="cb110-5" data-line-number="5"><span class="co"># check exit status of last command</span></a>
<a class="sourceLine" id="cb110-6" data-line-number="6"><span class="ex">%</span> echo <span class="va">$?</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7"><span class="ex">0</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8"></a>
<a class="sourceLine" id="cb110-9" data-line-number="9"><span class="co"># list a file we are pretty sure does not exist</span></a>
<a class="sourceLine" id="cb110-10" data-line-number="10"><span class="ex">%</span> ls I-doubt-this-file-exists.yeah.sure</a>
<a class="sourceLine" id="cb110-11" data-line-number="11"><span class="ex">ls</span>: I-doubt-this-file-exists.yeah.sure: No such file or directory</a>
<a class="sourceLine" id="cb110-12" data-line-number="12"></a>
<a class="sourceLine" id="cb110-13" data-line-number="13"><span class="co"># check the exit status of last command</span></a>
<a class="sourceLine" id="cb110-14" data-line-number="14"><span class="ex">%</span> echo <span class="va">$?</span></a>
<a class="sourceLine" id="cb110-15" data-line-number="15"><span class="ex">1</span></a></code></pre></div>
<p>While we don’t get to “see” the exit status of a command without
looking at <code>$?</code>, to the bash shell, when a command has completed
on the command line, it effectively becomes the value of its exit
status. This is important to understand when dealing with combinations
of exit statuses.</p>
<div id="combinations-of-exit-statuses" class="section level3">
<h3><span class="header-section-number">5.6.1</span> Combinations of exit statuses</h3>
<p>In bioinformatics, exit statuses can be helpful in a script to “decide” whether
to continue processing the next command, based on whether the previous one
failed or not. <code>bash</code> has an elegant way of implementing this in terms of
the binary operators <code>&amp;&amp;</code> and <code>||</code> that <em>combine</em> exit statuses. The <code>&amp;&amp;</code> is
a logical-AND combinining operator. If ES1 and ES2 are two exit statuses, then
<code>ES1 &amp;&amp; ES2</code> is “SUCCESS!” only if <em>both</em> ES1 and ES2 have exit statuses of
“SUCCESS!”. Here is a quick table:</p>
<table>
<thead>
<tr class="header">
<th><code>ES1</code></th>
<th><code>ES2</code></th>
<th><code>ES1 &amp;&amp; ES2</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>NO_SUCCESS</code></td>
<td><code>NO_SUCCESS</code></td>
<td><code>NO_SUCCESS</code></td>
</tr>
<tr class="even">
<td><code>NO_SUCCESS</code></td>
<td><code>SUCCESS!</code></td>
<td><code>NO_SUCCESS</code></td>
</tr>
<tr class="odd">
<td><code>SUCCESS!</code></td>
<td><code>NO_SUCCESS</code></td>
<td><code>NO_SUCCESS</code></td>
</tr>
<tr class="even">
<td><code>SUCCESS!</code></td>
<td><code>SUCCESS!</code></td>
<td><code>SUCCESS!</code></td>
</tr>
</tbody>
</table>
<p>If you study this table for a moment, you will see that
in the first two cases, the value of the combination,
<code>ES1 &amp;&amp; ES2</code> is apparent, just from knowing <code>ES1</code>. It
doesn’t matter whether <code>ES2</code> has an exit status
of <code>SUCCESS!</code> or <code>NO_SUCCESS</code>; either way, because
<code>ES1</code> has failed, we know that <code>ES1 &amp;&amp; ES2</code> will be
<code>NO_SUCCESS</code>.</p>
<p>This knowledge, combined with an understanding that
the bash shell is typically very busy, and so is not going to
do any extra work <em>that it does not need to do</em> will help you
to understand the behavior of the shell when two (or more)
commands are joined into a “compound command” with the <code>&amp;&amp;</code> symbol.
Consider this:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="ex">command1</span> <span class="kw">&amp;&amp;</span> <span class="ex">command2</span></a></code></pre></div>
<p>When bash looks at that, it sees that whoever wrote it wants to
know the <code>&amp;&amp;</code>-combination of exit statuses of <code>command1</code> and
<code>command2</code>. <code>bash</code> keeps that thought in the back of its mind,
and then starts working through the commands from left to right.
If <code>command1</code> fails, the shell says, “Hey! At this point, I know
the exit status of <code>command1 &amp;&amp; command2</code>, so I am not even going to
evaluate <code>command2</code>! On the other hand, if the exit status
of <code>command1</code> is”SUCCESS!“, then the shell will proceed to evaluating
<code>command2</code>, because it knows that if the exit status of <code>command1</code>
was”SUCCESS!&quot;, then it must evaluate <code>command2</code> so as to get its
exit status to properly evaluate <code>command1 &amp;&amp; command2</code>.</p>
<p>The upshot of this is a construction like the following:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="ex">command1</span> <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2">  <span class="ex">command2</span> <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3">  <span class="ex">command3</span> <span class="kw">&amp;&amp;</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb112-4" data-line-number="4">  <span class="ex">command4</span></a></code></pre></div>
<p>can be very useful in bioinformatics. This construction says,
evaluate each command, if all the preceding commands were successful.
If any of the commands fails, then none of the commands after them are
evaluated. This is helpful if future steps depend on the successful
completion of previous steps. In our example script, <code>clone-classroom-repos.sh</code>
at the beginning of this chapter, we see the <code>&amp;&amp;</code> used on lines 103–106.
This is saying, &quot;if we didn’t successfully clone the repository, then don’t
try to make a new branch in it, and if we didn’t successfully make a new
branch in it, then don’t try to push that branch back to GitHub.</p>
<p>The opposite of <code>&amp;&amp;</code> is the <code>||</code> which combines exit statuses in an OR fashion
with a table like the following:</p>
<table>
<thead>
<tr class="header">
<th><code>ES1</code></th>
<th><code>ES2</code></th>
<th><code>ES1 || ES2</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>NO_SUCCESS</code></td>
<td><code>NO_SUCCESS</code></td>
<td><code>NO_SUCCESS</code></td>
</tr>
<tr class="even">
<td><code>NO_SUCCESS</code></td>
<td><code>SUCCESS!</code></td>
<td><code>SUCCESS!</code></td>
</tr>
<tr class="odd">
<td><code>SUCCESS!</code></td>
<td><code>NO_SUCCESS</code></td>
<td><code>SUCCESS!</code></td>
</tr>
<tr class="even">
<td><code>SUCCESS!</code></td>
<td><code>SUCCESS!</code></td>
<td><code>SUCCESS!</code></td>
</tr>
</tbody>
</table>
<p>In this case, if <code>ES1</code> is <code>SUCCESS!</code> then we know that
<code>ES1 || ES2</code> will have a combined exit status of “SUCCESS!”
Consequently, we use the <code>||</code> to force evaluation of
another command in case the previous one failed. Like this:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="fu">ls</span> I-doubt-this-file-exists.yeah.sure <span class="kw">||</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;Aw shucks! That file aint there&quot;</span> <span class="op">&gt;</span> /dev/stderr</a></code></pre></div>
<p>Note, in the above, we redirect the text, “Aw shucks! That file aint there” to
a file named <code>/dev/stderr</code>. That file, <code>/dev/stderr</code> is a special file: anything
that you send into it gets immediately printed on <em>stderr</em>.</p>
<p>We end by noting that the numbers assigned to <code>SUCCESS!</code> and <code>NO_SUCCESS</code> do
not accord with the 0’s and 1’s used in a standard “truth-table” context. We just
have to deal with that. I find it much easier to think in terms of exit statuses
of <code>SUCCESS!</code> and <code>NO_SUCCESS</code>, than in terms of the 0’s and 1’s, respectively,
by which those statuses are represented in the computer.</p>
</div>
</div>
<div id="loops-and-repetition" class="section level2">
<h2><span class="header-section-number">5.7</span> Loops and repetition</h2>
<p>By this point, you have probably heard, or been told,
many times over, that Unix shell scripting is particularly good
for taking care of repetitive tasks. But, by this point in this
book, it might not yet be clear how that is the case. Wait no
more! This section will reveal a wonderful construct called the
<code>for</code> loop that lets you do a task repeatedly, each time setting
the value of a variable to something different that you want to
be applying some commands to.</p>
<p>The basic syntax of the <code>for</code> loop is:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="co"># here the cycled variable is &quot;i&quot;</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="kw">for</span> <span class="ex">i</span> in some things separated by whitespace<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb114-3" data-line-number="3">  <span class="ex">commands</span> involving <span class="va">$i</span></a>
<a class="sourceLine" id="cb114-4" data-line-number="4"><span class="kw">done</span></a></code></pre></div>
<p>For example:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="kw">for</span> <span class="ex">i</span> in oranges bananas apples<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb115-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;I like </span><span class="va">$i</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb115-3" data-line-number="3"><span class="kw">done</span></a>
<a class="sourceLine" id="cb115-4" data-line-number="4"></a>
<a class="sourceLine" id="cb115-5" data-line-number="5"><span class="co"># produces this:</span></a>
<a class="sourceLine" id="cb115-6" data-line-number="6"><span class="ex">I</span> like oranges</a>
<a class="sourceLine" id="cb115-7" data-line-number="7"><span class="ex">I</span> like bananas</a>
<a class="sourceLine" id="cb115-8" data-line-number="8"><span class="ex">I</span> like apples</a></code></pre></div>
<p>When you write a for loop in a script, it is good practice to indent
the command lines that will get evaluated multiple times. This is
particularly useful if you have nested for loops (one inside another)
such as:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="kw">for</span> <span class="ex">fruit</span> in pears figs<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2">  <span class="kw">for</span> <span class="fu">who</span> in Mark Alice<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb116-3" data-line-number="3">    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$who</span><span class="st"> likes </span><span class="va">$fruit</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb116-4" data-line-number="4">  <span class="kw">done</span></a>
<a class="sourceLine" id="cb116-5" data-line-number="5"><span class="kw">done</span></a>
<a class="sourceLine" id="cb116-6" data-line-number="6"></a>
<a class="sourceLine" id="cb116-7" data-line-number="7"><span class="co"># which produces:</span></a>
<a class="sourceLine" id="cb116-8" data-line-number="8"><span class="ex">Mark</span> likes pears</a>
<a class="sourceLine" id="cb116-9" data-line-number="9"><span class="ex">Alice</span> likes pears</a>
<a class="sourceLine" id="cb116-10" data-line-number="10"><span class="ex">Mark</span> likes figs</a>
<a class="sourceLine" id="cb116-11" data-line-number="11"><span class="ex">Alice</span> likes figs</a></code></pre></div>
<p>However, in bash (unlike Python, which is particularly obsessed with
indentation) you are not required to indent things. In fact the above could have
been written all on one line:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="kw">for</span> <span class="ex">fruit</span> in pears figs<span class="kw">;</span> <span class="kw">do</span> <span class="kw">for</span> <span class="fu">who</span> in Mark Alice<span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$who</span><span class="st"> likes </span><span class="va">$fruit</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">done</span>; <span class="kw">done</span></a></code></pre></div>
<p>It is also worth pointing out that, while many languages use curly braces to denote
blocks of repeated code, <code>bash</code> uses the pair <code>do...done</code>, which I find to be quite cute.</p>
<p>As found with the variable <code>GHNAMES</code> in our example script,
<code>clone-classroom-repos.sh</code>, you can also use variable
subsitution to provide a list of terms to cycle over. Here is
another small example:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="va">ITEMS=</span><span class="st">&quot;cats dogs mice shrews&quot;</span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2"><span class="kw">for</span> <span class="ex">critters</span> in <span class="va">$ITEMS</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb118-3" data-line-number="3">  <span class="bu">echo</span> <span class="va">$critters</span> are vertebrates</a>
<a class="sourceLine" id="cb118-4" data-line-number="4"><span class="kw">done</span></a></code></pre></div>
<p>You can also use globbing (path expansion) to provide a list of
things (files, specifically) to cycle over. The following prints the path
and the first two
lines of all files in the directory <code>table_inputs</code> in this book’s repository,
at this point in the book’s formation:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="kw">for</span> <span class="ex">i</span> in table_inputs/*<span class="kw">;</span> <span class="kw">do</span> </a>
<a class="sourceLine" id="cb119-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;======= file: </span><span class="va">$i</span><span class="st">  =========&quot;</span></a>
<a class="sourceLine" id="cb119-3" data-line-number="3">  <span class="fu">head</span> -n 2 <span class="va">$i</span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4"><span class="kw">done</span></a>
<a class="sourceLine" id="cb119-5" data-line-number="5"></a>
<a class="sourceLine" id="cb119-6" data-line-number="6"><span class="co"># this produces:</span></a>
<a class="sourceLine" id="cb119-7" data-line-number="7">======= <span class="ex">file</span>: table_inputs/minimal-tmux.txt  =========</a>
<a class="sourceLine" id="cb119-8" data-line-number="8"><span class="ex">Within</span> tmux?   <span class="kw">;</span>  <span class="ex">Command</span>         <span class="kw">;</span>  <span class="ex">Effect</span></a>
<a class="sourceLine" id="cb119-9" data-line-number="9"><span class="ex">N</span>              <span class="kw">;</span> <span class="kw">`</span><span class="ex">tmux</span> ls<span class="kw">`</span>          ; <span class="ex">List</span> any tmux sessions the server knows about</a>
<a class="sourceLine" id="cb119-10" data-line-number="10">======= <span class="ex">file</span>: table_inputs/sam-columns-table.txt  =========</a>
<a class="sourceLine" id="cb119-11" data-line-number="11"><span class="ex">Column</span>   <span class="kw">&amp;</span>  <span class="ex">Field</span>   <span class="kw">&amp;</span> <span class="ex">Data</span> Type  <span class="kw">&amp;</span> <span class="ex">Description</span></a>
<a class="sourceLine" id="cb119-12" data-line-number="12"><span class="ex">1</span>        <span class="kw">&amp;</span> <span class="ex">QNAME</span>    <span class="kw">&amp;</span> <span class="ex">String</span>     <span class="kw">&amp;</span> <span class="ex">Name/ID</span> of the read (from FASTQ file)</a>
<a class="sourceLine" id="cb119-13" data-line-number="13">======= <span class="ex">file</span>: table_inputs/sam-flag-table.txt  =========</a>
<a class="sourceLine" id="cb119-14" data-line-number="14"><span class="ex">bit-</span>#    <span class="kw">&amp;</span>   <span class="ex">bit-gram</span>   <span class="kw">&amp;</span>  <span class="va">$2</span>^<span class="ex">x</span>$   <span class="kw">&amp;</span>   <span class="ex">dec</span>    <span class="kw">&amp;</span>   <span class="ex">hex</span>     <span class="kw">&amp;</span> <span class="ex">Meaning</span></a>
<a class="sourceLine" id="cb119-15" data-line-number="15"><span class="ex">1</span>    <span class="kw">&amp;</span>  $\<span class="ex">bitsa</span>$    <span class="kw">&amp;</span>  <span class="va">$2</span>^<span class="ex">0</span>$   <span class="kw">&amp;</span>    <span class="ex">1</span>     <span class="kw">&amp;</span>   <span class="ex">0x1</span>    <span class="kw">&amp;</span> <span class="ex">the</span> read is paired (i.e. comes from paired-endsequencing.)</a>
<a class="sourceLine" id="cb119-16" data-line-number="16">======= <span class="ex">file</span>: table_inputs/tmux-pane-strokes.txt  =========</a>
<a class="sourceLine" id="cb119-17" data-line-number="17"><span class="ex">Within</span> tmux?   <span class="kw">;</span>  <span class="ex">Command</span>         <span class="kw">;</span>  <span class="ex">Effect</span></a>
<a class="sourceLine" id="cb119-18" data-line-number="18"><span class="ex">Y</span>              <span class="kw">;</span> <span class="kw">`</span><span class="op">&lt;</span><span class="ex">cntrl</span><span class="op">&gt;</span>-b /<span class="kw">`</span>       ; <span class="ex">Split</span> current window/pane vertically into two panes</a></code></pre></div>
<p>Those files are the ones used as input to a few of the tables
in the book.</p>
<p>If it turns out that you want to cycle over some integers,
in order (whether increasing or decreasing), from a starting
value to a stopping value, you can use curly braces and two dots,
like this: <code>{1..5}</code>, like this:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{1..5}</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> The number is: <span class="va">$i</span><span class="kw">;</span> <span class="kw">done</span></a>
<a class="sourceLine" id="cb120-2" data-line-number="2"></a>
<a class="sourceLine" id="cb120-3" data-line-number="3"><span class="co"># this makes:</span></a>
<a class="sourceLine" id="cb120-4" data-line-number="4"><span class="ex">Number</span> 1</a>
<a class="sourceLine" id="cb120-5" data-line-number="5"><span class="ex">Number</span> 2</a>
<a class="sourceLine" id="cb120-6" data-line-number="6"><span class="ex">Number</span> 3</a>
<a class="sourceLine" id="cb120-7" data-line-number="7"><span class="ex">Number</span> 4</a>
<a class="sourceLine" id="cb120-8" data-line-number="8"><span class="ex">Number</span> 5</a></code></pre></div>
<p>And you can have negative numbers and a reverse order, too:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb121-1" data-line-number="1"><span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{4..-2}</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> The number is: <span class="va">$i</span><span class="kw">;</span> <span class="kw">done</span></a>
<a class="sourceLine" id="cb121-2" data-line-number="2"></a>
<a class="sourceLine" id="cb121-3" data-line-number="3"><span class="co"># this makes</span></a>
<a class="sourceLine" id="cb121-4" data-line-number="4"><span class="ex">The</span> number is: 4</a>
<a class="sourceLine" id="cb121-5" data-line-number="5"><span class="ex">The</span> number is: 3</a>
<a class="sourceLine" id="cb121-6" data-line-number="6"><span class="ex">The</span> number is: 2</a>
<a class="sourceLine" id="cb121-7" data-line-number="7"><span class="ex">The</span> number is: 1</a>
<a class="sourceLine" id="cb121-8" data-line-number="8"><span class="ex">The</span> number is: 0</a>
<a class="sourceLine" id="cb121-9" data-line-number="9"><span class="ex">The</span> number is: -1</a>
<a class="sourceLine" id="cb121-10" data-line-number="10"><span class="ex">The</span> number is: -2</a></code></pre></div>
<p>One cool thing to realize is that any output that goes to <em>stdout</em>
from within a <code>for</code> loop—if it is not redirected from within the
loop—effectively comes “flowing out” to <em>stdout</em> from right
after the <code>done</code> keyword. So, you can redirect it in one swell foop
from that point in your code like this:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="kw">for</span> <span class="ex">i</span> in table_inputs/*<span class="kw">;</span> <span class="kw">do</span> </a>
<a class="sourceLine" id="cb122-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;======= file: </span><span class="va">$i</span><span class="st">  =========&quot;</span></a>
<a class="sourceLine" id="cb122-3" data-line-number="3">  <span class="fu">head</span> -n 2 <span class="va">$i</span></a>
<a class="sourceLine" id="cb122-4" data-line-number="4"><span class="kw">done</span> <span class="op">&gt;</span> <span class="ex">file-to-redirect-it-all-into.txt</span> </a></code></pre></div>
<p>…or, you could even pipe it to another command, like this, to print just the
first column of text of each line:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb123-1" data-line-number="1"><span class="kw">for</span> <span class="ex">i</span> in table_inputs/*<span class="kw">;</span> <span class="kw">do</span> </a>
<a class="sourceLine" id="cb123-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;======= file: </span><span class="va">$i</span><span class="st">  =========&quot;</span></a>
<a class="sourceLine" id="cb123-3" data-line-number="3">  <span class="fu">head</span> -n 2 <span class="va">$i</span></a>
<a class="sourceLine" id="cb123-4" data-line-number="4"><span class="kw">done</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span></a></code></pre></div>
</div>
<div id="more-conditional-evaluation-if-then-else-and-friends" class="section level2">
<h2><span class="header-section-number">5.8</span> More Conditional Evaluation: <code>if</code>, <code>then</code>, <code>else</code>, and friends</h2>
<p>We have already seen how exit statuses can be combined with
<code>&amp;&amp;</code> or <code>||</code> to control the flow of a script (i.e., if this
failed, don’t do the next line…). There is also a traditional
<code>if/then/else</code> construct in bash to control the execution of script
on the basis of exit status. Thus, we can do something like:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="kw">if</span> <span class="fu">ls</span> README.md<span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb124-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;We found the README&quot;</span></a>
<a class="sourceLine" id="cb124-3" data-line-number="3"><span class="kw">else</span></a>
<a class="sourceLine" id="cb124-4" data-line-number="4">  <span class="bu">echo</span> <span class="st">&quot;Can&#39;t find the README&quot;</span></a>
<a class="sourceLine" id="cb124-5" data-line-number="5"><span class="kw">fi</span></a></code></pre></div>
<p>Note that this opens an <code>if</code> block of code with <code>if</code> and then
it closes it (after the <code>then</code> and the <code>else</code>) with a backward
<code>if</code>: <code>fi</code>.</p>
<p>The general syntax is:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="kw">if</span> <span class="ex">exit_status</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb125-2" data-line-number="2">  <span class="ex">Do</span> this if exit_status = SUCCESS!</a>
<a class="sourceLine" id="cb125-3" data-line-number="3"><span class="kw">else</span></a>
<a class="sourceLine" id="cb125-4" data-line-number="4">  <span class="ex">Do</span> this if exit_status = NO_SUCCESS</a>
<a class="sourceLine" id="cb125-5" data-line-number="5"><span class="kw">fi</span></a></code></pre></div>
<p>There is also an else-if construct, that is named <code>elif</code>, with
syntax like this:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="kw">if</span> <span class="ex">exit_status1</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb126-2" data-line-number="2">  <span class="ex">Do</span> this if exit_status1 = SUCCESS!</a>
<a class="sourceLine" id="cb126-3" data-line-number="3"><span class="kw">elif</span> <span class="ex">exit_status2</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb126-4" data-line-number="4">  <span class="ex">Do</span> this if exit_status1 = NO_SUCCESS and exit_status2 = SUCCESS!</a>
<a class="sourceLine" id="cb126-5" data-line-number="5"><span class="kw">else</span> </a>
<a class="sourceLine" id="cb126-6" data-line-number="6">  <span class="ex">Do</span> this if both were NO_SUCCESS</a>
<a class="sourceLine" id="cb126-7" data-line-number="7"><span class="kw">fi</span></a></code></pre></div>
<p>Many of the times when you want to use an <code>if</code> construct, you will
want to be <em>testing</em> things about files, or strings or variables,
rather than assessing exit status of functions. Alas, all bash is
capable of is assessing exit statuses. But hark! All is not lost becuase
there is a function called <code>test</code> that let’s you test if statements
are true, and if they are, then it returns an exit status of 0 (SUCCESS!).</p>
<p>For example, to test if a file exists, you can use:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="co"># this file does exist in the current directory on my system...</span></a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="bu">test</span> -f eca-bioinf-handbook.Rproj</a>
<a class="sourceLine" id="cb127-3" data-line-number="3"></a>
<a class="sourceLine" id="cb127-4" data-line-number="4"><span class="co"># do this to see what the exit status was</span></a>
<a class="sourceLine" id="cb127-5" data-line-number="5"><span class="bu">echo</span> <span class="va">$?</span></a></code></pre></div>
<p>Or, if we want to test if the value of a variable is the same as
some string.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="va">VAR=</span>big_and_bad <span class="co"># set a variable to some string value</span></a>
<a class="sourceLine" id="cb128-2" data-line-number="2"></a>
<a class="sourceLine" id="cb128-3" data-line-number="3"><span class="bu">test</span> <span class="va">$VAR</span> = small_and_sweet</a>
<a class="sourceLine" id="cb128-4" data-line-number="4"></a>
<a class="sourceLine" id="cb128-5" data-line-number="5"><span class="co"># get exit status, which will be NO_SUCCESS (1)</span></a>
<a class="sourceLine" id="cb128-6" data-line-number="6"><span class="bu">echo</span> <span class="va">$?</span></a></code></pre></div>
<p>The value of integer variables can be tested too. See <code>man test</code> for
all the details.</p>
<p>Now, the thing to remember about the test function is that there
is an intuitive-looking shorthand for writing it: that is to write
its arguments between a <code>[</code> and a <code>]</code>, but not touching either of them.</p>
<p>So:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="co"># this</span></a>
<a class="sourceLine" id="cb129-2" data-line-number="2"><span class="bu">test</span> <span class="va">$VAR</span> = small_and_sweet</a>
<a class="sourceLine" id="cb129-3" data-line-number="3"></a>
<a class="sourceLine" id="cb129-4" data-line-number="4"><span class="co"># is equivalent to:</span></a>
<a class="sourceLine" id="cb129-5" data-line-number="5"><span class="bu">[</span> <span class="va">$VAR</span> <span class="ot">=</span> <span class="st">&quot;small_and_sweet&quot;</span><span class="bu"> ]</span>;</a></code></pre></div>
<p>Note that the RStudio bash shell seems to be doing something weird,
I don’t think the “last command” is quite what we think it should be,
so <code>$?</code> does not seem to be reliable.</p>
</div>
<div id="finallypositional-parameters" class="section level2">
<h2><span class="header-section-number">5.9</span> Finally…positional parameters</h2>
<p>Way back when we started this chapter, in the example script, <code>clone-classroom-repos.sh</code>,
right at the top we see lines like:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="va">GHP=$1</span></a></code></pre></div>
<p>What the heck is that <code>$1</code>. That is not proper syntax for a variable name! A variable
name can’t start with a number, after all. Aha! <code>$1</code>, <code>$2</code>, <code>$3</code>, and so forth are
variables that store the <em>positional parameters</em> of a script. In other words if you write a
script called <code>my_script.sh</code> and you invoke it with some words after it, like:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="ex">my_script.sh</span>  BigFile.txt  small_file.txt  Yee-ha   <span class="st">&#39;Oh Yeah&#39;</span></a></code></pre></div>
<p>Then, when that script is executing the code inside it, the value of
<code>$1</code> will be <code>BigFile.txt</code>, the value of <code>$2</code> will be <code>small-file.txt</code>, the
value of <code>$3</code> will be <code>Yee-ha</code>, and the value of <code>$4</code> will be <code>Oh Yeah</code>.</p>
<p>The variable <code>$#</code> inside the script holds the number of positional parameters, and,
in our example script <code>[ $# -ne 4 ]</code> evaluates to <code>NO_SUCCESS</code> if <code>$#</code> is not equal
to 4, in which case the script prints a message about how to use it.</p>
<p><strong>Your Turn</strong>: Write a script in a separate file called “three-things.sh” that is
expecting to take three positional parameters. In side the script, have it print
the actual values passed to it in reverse order for example:</p>
<pre><code>Third parameters is: -----
Second parameter is: -----
First parameters is: -----</code></pre>
<p>Where <code>-----</code> would be replaced by the actual value of the positional parameters.</p>
</div>
<div id="basename-and-dirname-two-useful-little-utilities" class="section level2">
<h2><span class="header-section-number">5.10</span> <code>basename</code> and <code>dirname</code> two useful little utilities</h2>
<p>Paths to files and directories expand and are listed as the paths relative
to the current working directory. Sometimes, you just want the name of the
file. This is what <code>basename</code> gives you. For example:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb133-1" data-line-number="1"><span class="co"># expand the filenames a couple directories down:</span></a>
<a class="sourceLine" id="cb133-2" data-line-number="2"><span class="va">files=</span><span class="st">&quot;figure-creation/1.01-unix/*&quot;</span></a>
<a class="sourceLine" id="cb133-3" data-line-number="3"></a>
<a class="sourceLine" id="cb133-4" data-line-number="4"><span class="co"># print all those file names</span></a>
<a class="sourceLine" id="cb133-5" data-line-number="5"><span class="bu">echo</span> <span class="va">$files</span></a>
<a class="sourceLine" id="cb133-6" data-line-number="6"></a>
<a class="sourceLine" id="cb133-7" data-line-number="7"><span class="co"># that produces this output:</span></a>
<a class="sourceLine" id="cb133-8" data-line-number="8"><span class="ex">figure-creation/1.01-unix/file-hierarchy.dot</span> figure-creation/1.01-unix/file-hierarchy.pdf figure-creation/1.01-unix/file-hierarchy.png figure-creation/1.01-unix/file-hierarchy.sh</a>
<a class="sourceLine" id="cb133-9" data-line-number="9"></a>
<a class="sourceLine" id="cb133-10" data-line-number="10"><span class="co"># do this to get just the filenames:</span></a>
<a class="sourceLine" id="cb133-11" data-line-number="11"><span class="fu">basename</span> <span class="va">$files</span></a>
<a class="sourceLine" id="cb133-12" data-line-number="12"></a>
<a class="sourceLine" id="cb133-13" data-line-number="13"><span class="co"># which produces this output:</span></a>
<a class="sourceLine" id="cb133-14" data-line-number="14"><span class="ex">file-hierarchy.dot</span></a>
<a class="sourceLine" id="cb133-15" data-line-number="15"><span class="ex">file-hierarchy.pdf</span></a>
<a class="sourceLine" id="cb133-16" data-line-number="16"><span class="ex">file-hierarchy.png</span></a>
<a class="sourceLine" id="cb133-17" data-line-number="17"><span class="ex">file-hierarchy.sh</span></a>
<a class="sourceLine" id="cb133-18" data-line-number="18"></a>
<a class="sourceLine" id="cb133-19" data-line-number="19"><span class="co"># if you want just the relative path to the directories those files</span></a>
<a class="sourceLine" id="cb133-20" data-line-number="20"><span class="co"># are in you can use dirname, but have to operate on one file at a time:</span></a>
<a class="sourceLine" id="cb133-21" data-line-number="21"><span class="kw">for</span> <span class="ex">i</span> in <span class="va">$files</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb133-22" data-line-number="22">  <span class="fu">dirname</span> <span class="va">$i</span></a>
<a class="sourceLine" id="cb133-23" data-line-number="23"><span class="kw">done</span></a>
<a class="sourceLine" id="cb133-24" data-line-number="24"></a>
<a class="sourceLine" id="cb133-25" data-line-number="25"><span class="co"># makes this output:</span></a>
<a class="sourceLine" id="cb133-26" data-line-number="26"><span class="ex">figure-creation/1.01-unix</span></a>
<a class="sourceLine" id="cb133-27" data-line-number="27"><span class="ex">figure-creation/1.01-unix</span></a>
<a class="sourceLine" id="cb133-28" data-line-number="28"><span class="ex">figure-creation/1.01-unix</span></a>
<a class="sourceLine" id="cb133-29" data-line-number="29"><span class="ex">figure-creation/1.01-unix</span></a></code></pre></div>
</div>
<div id="bash-functions" class="section level2">
<h2><span class="header-section-number">5.11</span> <code>bash</code> functions</h2>
<p>In our example script, <code>clone-classroom-repos.sh</code>, we define a bash <em>function</em> called <code>usage</code>
that prints a helpful message showing the syntax and an example invocation of the script.
This provides an example of how you can write functions in <code>bash</code>. In all honesty, I only
rarely use functions in <code>bash</code>, but it is good to know about nonetheless.</p>
<p>In <code>bash</code>, a function is just a collection of commands, grouped using curly braces, that
will be evaluated when the function’s name is issued on the command line or within a script.
Not only will those lines be evaluated, but you can also pass <em>positional parameters</em> to the
function by following its name with other words/tokens/values. The <em>positional parameters</em>
within a function are distinct from the positional parameters within, say, the main script.</p>
<p>Functions can be defined, most transparently, by using the <code>function</code> keyword.
As an example, here is a silly function, called <code>Silly</code> that takes two positional parameters
and then merely prints them separated by monkey noises.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="kw">function</span><span class="fu"> Silly</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">  Ooooh-oooh  Aaaah-aaah  </span><span class="va">$2</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb134-3" data-line-number="3"><span class="kw">}</span></a>
<a class="sourceLine" id="cb134-4" data-line-number="4"></a>
<a class="sourceLine" id="cb134-5" data-line-number="5"><span class="co"># now, try</span></a>
<a class="sourceLine" id="cb134-6" data-line-number="6"><span class="ex">Silly</span> foo bar</a></code></pre></div>
<p>Another syntax you might see is to not use the <em>function</em> keyword, but rather
follow the function’s name with <code>()</code>:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="fu">Silly2()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb135-2" data-line-number="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">  Ooooh-oooh  Aaaah-aaah  </span><span class="va">$2</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb135-3" data-line-number="3"><span class="kw">}</span></a>
<a class="sourceLine" id="cb135-4" data-line-number="4"></a>
<a class="sourceLine" id="cb135-5" data-line-number="5"><span class="co"># now, try</span></a>
<a class="sourceLine" id="cb135-6" data-line-number="6"><span class="ex">Silly2</span> boing bonk</a></code></pre></div>
<p>You can even put it all on one line, but you have to make sure that you respect
the curly-braces sensitivity to spacing and explicit line ending semicolons:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="kw">function</span><span class="fu"> Silly3</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">  Ooooh-oooh  Aaaah-aaah  </span><span class="va">$2</span><span class="st">&quot;</span><span class="kw">;}</span></a>
<a class="sourceLine" id="cb136-2" data-line-number="2"></a>
<a class="sourceLine" id="cb136-3" data-line-number="3"><span class="co"># now, try</span></a>
<a class="sourceLine" id="cb136-4" data-line-number="4"><span class="ex">Silly3</span> bing bap</a></code></pre></div>
</div>
<div id="reading-files-line-by-line" class="section level2">
<h2><span class="header-section-number">5.12</span> reading files line by line</h2>
<p>This is handy. Note the line can be broken into a shell array:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="co"># this is an example of reading a file in which each row is delimited</span></a>
<a class="sourceLine" id="cb137-2" data-line-number="2"><span class="co"># by whitespace, the second column is a file name and the the</span></a>
<a class="sourceLine" id="cb137-3" data-line-number="3"><span class="co"># third column is a number</span></a>
<a class="sourceLine" id="cb137-4" data-line-number="4"><span class="fu">cat</span> a_file <span class="kw">|</span> <span class="kw">while</span> <span class="bu">read</span> -r <span class="va">line</span>; <span class="kw">do</span> </a>
<a class="sourceLine" id="cb137-5" data-line-number="5">  <span class="va">A=($line)</span>; </a>
<a class="sourceLine" id="cb137-6" data-line-number="6">  <span class="va">file=${A[1]}</span>; </a>
<a class="sourceLine" id="cb137-7" data-line-number="7">  <span class="va">num=${A[2]}</span>; </a>
<a class="sourceLine" id="cb137-8" data-line-number="8"><span class="kw">done</span></a></code></pre></div>
</div>
<div id="further-reading" class="section level2">
<h2><span class="header-section-number">5.13</span> Further reading</h2>
<p>An excellent chapter on the development of Unix <span class="citation">(Raymond <a href="#ref-RaymondArtUNIXProgramming2003">2003</a>)</span></p>
<p>A nice set of bash scripting tutorials can be found at
<a href="https://ryanstutorials.net/bash-scripting-tutorial/">https://ryanstutorials.net/bash-scripting-tutorial/</a></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-RaymondArtUNIXProgramming2003">
<p>Raymond, Eric S. 2003. <em>Art of UNIX Programming, The</em>. 1st ed. Addison-Wesley Professional. Part of the Addison-Wesley Professional Computing Series series.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="essential-unixlinux-terminal-knowledge.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sed-awk-and-regular-expressions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/eriqande/eca-bioinf-handbook/edit/master/1.015-shell-programming.Rmd",
"text": "Edit"
},
"history": {
"link": "https://github.com/eriqande/eca-bioinf-handbook/commits/master/1.015-shell-programming.Rmd",
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["eca-bioinf-handbook.pdf", "eca-bioinf-handbook.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
